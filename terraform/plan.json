{"format_version":"0.2","terraform_version":"1.0.7","planned_values":{"outputs":{"alerts_by_node":{"sensitive":false,"value":{"cpu":{"alarm_description":"CPU Utilization is over 85% for 6 minutes on core node.","alarm_name":"cpu-utilization-high","comparison_operator":"GreaterThanOrEqualToThreshold","evaluation_periods":"3","metric_name":"CPUUtilization","namespace":"AWS/EC2","node_name":"core0","period":"120","statistic":"Average","threshold":"85"},"instance":{"alarm_description":"An instance in the rocketpool ASG is terminating","alarm_name":"instance-termination","comparison_operator":"GreaterThanOrEqualToThreshold","evaluation_periods":"1","metric_name":"GreaterThanOrEqualToThreshold","namespace":"AWS/AutoScaling","node_name":"core0","period":"120","statistic":"Average","threshold":"1"},"service":{"alarm_description":"Rocketpool ASG has less than 1 instances in service.","alarm_name":"in-service-instances","comparison_operator":"LessThanOrEqualToThreshold","evaluation_periods":"1","metric_name":"GroupInServiceInstances","namespace":"AWS/AutoScaling","node_name":"core0","period":"120","statistic":"Average","threshold":"0"}}},"node_public_ips":{"sensitive":false},"ssh_private_key":{"sensitive":true},"vpc_id":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_autoscaling_group.node[\"core0\"]","mode":"managed","type":"aws_autoscaling_group","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_rebalance":null,"desired_capacity":1,"enabled_metrics":["GroupInServiceInstances","GroupTerminatingInstances"],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":null,"launch_template":[{"version":"$Latest"}],"load_balancers":null,"max_instance_lifetime":null,"max_size":1,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"rocket-pool-mainnet-00-node-core0"},{"key":"billing","propagate_at_launch":true,"value":"rocketpool"},{"key":"eth_network","propagate_at_launch":true,"value":"mainnet"},{"key":"eth_node_type","propagate_at_launch":true,"value":"core"},{"key":"nodes","propagate_at_launch":true,"value":"core"},{"key":"rocket_pool","propagate_at_launch":true,"value":"mainnet-00"}],"tags":null,"target_group_arns":null,"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"sensitive_values":{"availability_zones":[],"enabled_metrics":[false,false],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[{}],"mixed_instances_policy":[],"tag":[{},{},{},{},{},{}],"vpc_zone_identifier":[],"warm_pool":[]}},{"address":"aws_ebs_volume.node_data[\"core0\"]","mode":"managed","type":"aws_ebs_volume","name":"node_data","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":"us-east-1c","encrypted":true,"multi_attach_enabled":null,"outpost_arn":null,"size":1000,"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"type":"gp3"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_eip.node[\"core0\"]","mode":"managed","type":"aws_eip","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_instance_profile.node[\"core0\"]","mode":"managed","type":"aws_iam_instance_profile","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"rocket-pool-mainnet-00-node-core0","name_prefix":null,"path":"/","role":"rocket-pool-mainnet-00-node-core0","tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_role.node[\"core0\"]","mode":"managed","type":"aws_iam_role","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[{"name":"ebs-attach","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:AttachVolume\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ec2:ResourceTag/Name\": [\n            \"rocket-pool-mainnet-00-node-core0\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeVolumes\",\n        \"ec2:DescribeVolumeStatus\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}"},{"name":"eip-attach","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:AssociateAddress\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ec2:ResourceTag/Name\": [\n            \"rocket-pool-mainnet-00-node-core0\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeAddresses\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}"},{"name":"s3-deploy"}],"max_session_duration":3600,"name":"rocket-pool-mainnet-00-node-core0","path":"/","permissions_boundary":null,"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"inline_policy":[{},{},{}],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"aws_key_pair.common","mode":"managed","type":"aws_key_pair","name":"common","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"key_name":"rocket-pool-mainnet-00","key_name_prefix":null,"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_launch_template.node[\"core0\"]","mode":"managed","type":"aws_launch_template","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"true","kms_key_id":null,"snapshot_id":null,"volume_size":20,"volume_type":"gp3"}],"no_device":null,"virtual_name":null}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"description":null,"disable_api_termination":true,"ebs_optimized":null,"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":null,"name":"rocket-pool-mainnet-00-node-core0"}],"image_id":"ami-089b5711e63812c2a","instance_initiated_shutdown_behavior":null,"instance_market_options":[],"instance_type":"r5a.large","kernel_id":null,"key_name":"rocket-pool-mainnet-00","license_specification":[],"monitoring":[],"name_prefix":"rocket-pool-mainnet-00-node-core0","network_interfaces":[],"placement":[],"ram_disk_id":null,"security_group_names":null,"tag_specifications":[],"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"update_default_version":true},"sensitive_values":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"license_specification":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_s3_bucket.deploy","mode":"managed","type":"aws_s3_bucket","name":"deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","bucket":"cloudstruct-rocketpool-deploy-mainnet-00","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[{"target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"AES256"}],"bucket_key_enabled":null}]}],"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[]},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[{}],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}},{"address":"aws_s3_bucket.log_bucket","mode":"managed","type":"aws_s3_bucket","name":"log_bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"log-delivery-write","bucket":"cloudstruct-rocketpool-access-log","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"AES256"}],"bucket_key_enabled":null}]}],"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"website":[]},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket_object.ansible_tar_gz","mode":"managed","type":"aws_s3_bucket_object","name":"ansible_tar_gz","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","cache_control":null,"content":null,"content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"etag":"ec08738c64efd09658c62cdce66fe84c","force_destroy":false,"key":"ansible-v1.0.0-pre.tar.gz","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":"./ansible-v1.0.0-pre.tar.gz","source_hash":null,"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"website_redirect":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_security_group.common","mode":"managed","type":"aws_security_group","name":"common","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Common security group for nodes in RocketPool pool mainnet-00","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"rocket-pool-mainnet-00-common","revoke_rules_on_delete":false,"tags":{"Name":"rocket-pool-mainnet-00-common","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-common","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]}],"ingress":[],"tags":{},"tags_all":{}}},{"address":"aws_security_group.core_node","mode":"managed","type":"aws_security_group","name":"core_node","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for core node in RocketPool pool mainnet-00","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"ETH1 Discovery","from_port":30303,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":30303},{"cidr_blocks":["0.0.0.0/0"],"description":"ETH1 Discovery","from_port":30303,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"udp","security_groups":[],"self":false,"to_port":30303},{"cidr_blocks":["0.0.0.0/0"],"description":"ETH2 Discovery","from_port":9001,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":9001},{"cidr_blocks":["0.0.0.0/0"],"description":"ETH2 Discovery","from_port":9001,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"udp","security_groups":[],"self":false,"to_port":9001},{"cidr_blocks":["108.53.159.21/32"],"description":"Grafana HTTP","from_port":3100,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":3100},{"cidr_blocks":["108.53.159.21/32"],"description":"SSH from internet","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"rocket-pool-mainnet-00-core-node","revoke_rules_on_delete":false,"tags":{"Name":"rocket-pool-mainnet-00-node","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"data.aws_iam_policy_document.s3_deploy","mode":"data","type":"aws_iam_policy_document","name":"s3_deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetBucketLocation","s3:ListBucket"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},{"address":"data.template_cloudinit_config.node[\"core0\"]","mode":"data","type":"template_cloudinit_config","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/template","schema_version":0,"values":{"base64_encode":null,"gzip":false,"part":[{"content_type":"text/cloud-config","filename":"init.cfg","merge_type":null}]},"sensitive_values":{"part":[{}]}},{"address":"local_file.tar_sh","mode":"managed","type":"local_file","name":"tar_sh","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"./tar.sh","id":"c02c14479e06eb06d7e8dfdd85d03bf6b7fd2320","sensitive_content":null,"source":null},"sensitive_values":{}},{"address":"tls_private_key.ssh_keypair","mode":"managed","type":"tls_private_key","name":"ssh_keypair","provider_name":"registry.terraform.io/hashicorp/tls","schema_version":0,"values":{"algorithm":"RSA","ecdsa_curve":"P224","rsa_bits":2048},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.cloudwatch_metric_alarms[\"cpu\"].aws_cloudwatch_metric_alarm.this[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"CPU Utilization is over 85% for 6 minutes on core node.","alarm_name":"rocketpool-mainnet-00-core0-cpu-utilization-high","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":3,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","ok_actions":null,"period":120,"statistic":"Average","tags":null,"threshold":85,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"dimensions":{},"metric_query":[],"tags_all":{}}}],"address":"module.cloudwatch_metric_alarms[\"cpu\"]"},{"resources":[{"address":"module.cloudwatch_metric_alarms[\"instance\"].aws_cloudwatch_metric_alarm.this[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"An instance in the rocketpool ASG is terminating","alarm_name":"rocketpool-mainnet-00-core0-instance-termination","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"GreaterThanOrEqualToThreshold","metric_query":[],"namespace":"AWS/AutoScaling","ok_actions":null,"period":120,"statistic":"Average","tags":null,"threshold":1,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"dimensions":{},"metric_query":[],"tags_all":{}}}],"address":"module.cloudwatch_metric_alarms[\"instance\"]"},{"resources":[{"address":"module.cloudwatch_metric_alarms[\"service\"].aws_cloudwatch_metric_alarm.this[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"Rocketpool ASG has less than 1 instances in service.","alarm_name":"rocketpool-mainnet-00-core0-in-service-instances","comparison_operator":"LessThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"GroupInServiceInstances","metric_query":[],"namespace":"AWS/AutoScaling","ok_actions":null,"period":120,"statistic":"Average","tags":null,"threshold":0,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"dimensions":{},"metric_query":[],"tags_all":{}}}],"address":"module.cloudwatch_metric_alarms[\"service\"]"},{"resources":[{"address":"module.vpc.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null,"vpc":true},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_internet_gateway.this[0]","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.this[0]","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","tags":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route.public_internet_gateway[0]","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"rocket-pool-mainnet-00-public","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-public","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"rocket-pool-mainnet-00-public-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-public-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.this[0]","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":false,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"aws_autoscaling_group.node[\"core0\"]","mode":"managed","type":"aws_autoscaling_group","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_rebalance":null,"desired_capacity":1,"enabled_metrics":["GroupInServiceInstances","GroupTerminatingInstances"],"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"initial_lifecycle_hook":[],"instance_refresh":[],"launch_configuration":null,"launch_template":[{"version":"$Latest"}],"load_balancers":null,"max_instance_lifetime":null,"max_size":1,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"mixed_instances_policy":[],"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"rocket-pool-mainnet-00-node-core0"},{"key":"billing","propagate_at_launch":true,"value":"rocketpool"},{"key":"eth_network","propagate_at_launch":true,"value":"mainnet"},{"key":"eth_node_type","propagate_at_launch":true,"value":"core"},{"key":"nodes","propagate_at_launch":true,"value":"core"},{"key":"rocket_pool","propagate_at_launch":true,"value":"mainnet-00"}],"tags":null,"target_group_arns":null,"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"after_unknown":{"arn":true,"availability_zones":true,"default_cooldown":true,"enabled_metrics":[false,false],"health_check_type":true,"id":true,"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[{"id":true,"name":true}],"mixed_instances_policy":[],"name":true,"name_prefix":true,"service_linked_role_arn":true,"tag":[{},{},{},{},{},{}],"vpc_zone_identifier":true,"warm_pool":[]},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"enabled_metrics":[false,false],"initial_lifecycle_hook":[],"instance_refresh":[],"launch_template":[{}],"mixed_instances_policy":[],"tag":[{},{},{},{},{},{}],"vpc_zone_identifier":[],"warm_pool":[]}}},{"address":"aws_ebs_volume.node_data[\"core0\"]","mode":"managed","type":"aws_ebs_volume","name":"node_data","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":"us-east-1c","encrypted":true,"multi_attach_enabled":null,"outpost_arn":null,"size":1000,"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"type":"gp3"},"after_unknown":{"arn":true,"id":true,"iops":true,"kms_key_id":true,"snapshot_id":true,"tags":{},"tags_all":{},"throughput":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_eip.node[\"core0\"]","mode":"managed","type":"aws_eip","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_instance_profile.node[\"core0\"]","mode":"managed","type":"aws_iam_instance_profile","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"rocket-pool-mainnet-00-node-core0","name_prefix":null,"path":"/","role":"rocket-pool-mainnet-00-node-core0","tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_role.node[\"core0\"]","mode":"managed","type":"aws_iam_role","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"inline_policy":[{"name":"ebs-attach","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:AttachVolume\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ec2:ResourceTag/Name\": [\n            \"rocket-pool-mainnet-00-node-core0\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeVolumes\",\n        \"ec2:DescribeVolumeStatus\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}"},{"name":"eip-attach","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:AssociateAddress\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ec2:ResourceTag/Name\": [\n            \"rocket-pool-mainnet-00-node-core0\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeAddresses\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}"},{"name":"s3-deploy"}],"max_session_duration":3600,"name":"rocket-pool-mainnet-00-node-core0","path":"/","permissions_boundary":null,"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[{},{},{"policy":true}],"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[{},{},{}],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"aws_key_pair.common","mode":"managed","type":"aws_key_pair","name":"common","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key_name":"rocket-pool-mainnet-00","key_name_prefix":null,"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"fingerprint":true,"id":true,"key_pair_id":true,"public_key":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_launch_template.node[\"core0\"]","mode":"managed","type":"aws_launch_template","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_device_mappings":[{"device_name":"/dev/sda1","ebs":[{"delete_on_termination":"true","encrypted":"true","kms_key_id":null,"snapshot_id":null,"volume_size":20,"volume_type":"gp3"}],"no_device":null,"virtual_name":null}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"description":null,"disable_api_termination":true,"ebs_optimized":null,"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":null,"name":"rocket-pool-mainnet-00-node-core0"}],"image_id":"ami-089b5711e63812c2a","instance_initiated_shutdown_behavior":null,"instance_market_options":[],"instance_type":"r5a.large","kernel_id":null,"key_name":"rocket-pool-mainnet-00","license_specification":[],"monitoring":[],"name_prefix":"rocket-pool-mainnet-00-node-core0","network_interfaces":[],"placement":[],"ram_disk_id":null,"security_group_names":null,"tag_specifications":[],"tags":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node-core0","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"update_default_version":true},"after_unknown":{"arn":true,"block_device_mappings":[{"ebs":[{"iops":true,"throughput":true}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":true,"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"id":true,"instance_market_options":[],"latest_version":true,"license_specification":[],"metadata_options":true,"monitoring":[],"name":true,"network_interfaces":[],"placement":[],"tag_specifications":[],"tags":{},"tags_all":{},"user_data":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"block_device_mappings":[{"ebs":[{}]}],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"license_specification":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"tag_specifications":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_s3_bucket.deploy","mode":"managed","type":"aws_s3_bucket","name":"deploy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket":"cloudstruct-rocketpool-deploy-mainnet-00","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[{"target_prefix":"log/"}],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"AES256"}],"bucket_key_enabled":null}]}],"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"versioning":[{"enabled":true,"mfa_delete":false}],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[{"target_bucket":true}],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[],"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[{}],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"aws_s3_bucket.log_bucket","mode":"managed","type":"aws_s3_bucket","name":"log_bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"log-delivery-write","bucket":"cloudstruct-rocketpool-access-log","bucket_prefix":null,"cors_rule":[],"force_destroy":false,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":null,"sse_algorithm":"AES256"}],"bucket_key_enabled":null}]}],"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":true,"website":[],"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket_object.ansible_tar_gz","mode":"managed","type":"aws_s3_bucket_object","name":"ansible_tar_gz","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","cache_control":null,"content":null,"content_base64":null,"content_disposition":null,"content_encoding":null,"content_language":null,"etag":"ec08738c64efd09658c62cdce66fe84c","force_destroy":false,"key":"ansible-v1.0.0-pre.tar.gz","metadata":null,"object_lock_legal_hold_status":null,"object_lock_mode":null,"object_lock_retain_until_date":null,"source":"./ansible-v1.0.0-pre.tar.gz","source_hash":null,"tags":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"website_redirect":null},"after_unknown":{"bucket":true,"bucket_key_enabled":true,"content_type":true,"id":true,"kms_key_id":true,"server_side_encryption":true,"storage_class":true,"tags":{},"tags_all":{},"version_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_security_group.common","mode":"managed","type":"aws_security_group","name":"common","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Common security group for nodes in RocketPool pool mainnet-00","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"rocket-pool-mainnet-00-common","revoke_rules_on_delete":false,"tags":{"Name":"rocket-pool-mainnet-00-common","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-common","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]}],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.core_node","mode":"managed","type":"aws_security_group","name":"core_node","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for core node in RocketPool pool mainnet-00","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"ETH1 Discovery","from_port":30303,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":30303},{"cidr_blocks":["0.0.0.0/0"],"description":"ETH1 Discovery","from_port":30303,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"udp","security_groups":[],"self":false,"to_port":30303},{"cidr_blocks":["0.0.0.0/0"],"description":"ETH2 Discovery","from_port":9001,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":9001},{"cidr_blocks":["0.0.0.0/0"],"description":"ETH2 Discovery","from_port":9001,"ipv6_cidr_blocks":["::/0"],"prefix_list_ids":[],"protocol":"udp","security_groups":[],"self":false,"to_port":9001},{"cidr_blocks":["108.53.159.21/32"],"description":"Grafana HTTP","from_port":3100,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":3100},{"cidr_blocks":["108.53.159.21/32"],"description":"SSH from internet","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22}],"name":"rocket-pool-mainnet-00-core-node","revoke_rules_on_delete":false,"tags":{"Name":"rocket-pool-mainnet-00-node","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-node","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[false],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"data.aws_iam_policy_document.s3_deploy","mode":"data","type":"aws_iam_policy_document","name":"s3_deploy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetBucketLocation","s3:ListBucket"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}}},{"address":"data.template_cloudinit_config.node[\"core0\"]","mode":"data","type":"template_cloudinit_config","name":"node","index":"core0","provider_name":"registry.terraform.io/hashicorp/template","change":{"actions":["read"],"before":null,"after":{"base64_encode":null,"gzip":false,"part":[{"content_type":"text/cloud-config","filename":"init.cfg","merge_type":null}]},"after_unknown":{"id":true,"part":[{"content":true}],"rendered":true},"before_sensitive":false,"after_sensitive":{"part":[{}]}}},{"address":"local_file.tar_sh","mode":"managed","type":"local_file","name":"tar_sh","provider_name":"registry.terraform.io/hashicorp/local","change":{"actions":["no-op"],"before":{"content":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"./tar.sh","id":"c02c14479e06eb06d7e8dfdd85d03bf6b7fd2320","sensitive_content":null,"source":null},"after":{"content":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"./tar.sh","id":"c02c14479e06eb06d7e8dfdd85d03bf6b7fd2320","sensitive_content":null,"source":null},"after_unknown":{},"before_sensitive":{"sensitive_content":true},"after_sensitive":{"sensitive_content":true}}},{"address":"module.cloudwatch_metric_alarms[\"cpu\"].aws_cloudwatch_metric_alarm.this[0]","module_address":"module.cloudwatch_metric_alarms[\"cpu\"]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"CPU Utilization is over 85% for 6 minutes on core node.","alarm_name":"rocketpool-mainnet-00-core0-cpu-utilization-high","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":3,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","ok_actions":null,"period":120,"statistic":"Average","tags":null,"threshold":85,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags_all":true},"before_sensitive":false,"after_sensitive":{"dimensions":{},"metric_query":[],"tags_all":{}}}},{"address":"module.cloudwatch_metric_alarms[\"instance\"].aws_cloudwatch_metric_alarm.this[0]","module_address":"module.cloudwatch_metric_alarms[\"instance\"]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"An instance in the rocketpool ASG is terminating","alarm_name":"rocketpool-mainnet-00-core0-instance-termination","comparison_operator":"GreaterThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"GreaterThanOrEqualToThreshold","metric_query":[],"namespace":"AWS/AutoScaling","ok_actions":null,"period":120,"statistic":"Average","tags":null,"threshold":1,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags_all":true},"before_sensitive":false,"after_sensitive":{"dimensions":{},"metric_query":[],"tags_all":{}}}},{"address":"module.cloudwatch_metric_alarms[\"service\"].aws_cloudwatch_metric_alarm.this[0]","module_address":"module.cloudwatch_metric_alarms[\"service\"]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"Rocketpool ASG has less than 1 instances in service.","alarm_name":"rocketpool-mainnet-00-core0-in-service-instances","comparison_operator":"LessThanOrEqualToThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"GroupInServiceInstances","metric_query":[],"namespace":"AWS/AutoScaling","ok_actions":null,"period":120,"statistic":"Average","tags":null,"threshold":0,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags_all":true},"before_sensitive":false,"after_sensitive":{"dimensions":{},"metric_query":[],"tags_all":{}}}},{"address":"module.vpc.aws_eip.nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","tags":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"allocation_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route.public_internet_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":{"create":"5m","delete":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route_table.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"rocket-pool-mainnet-00-public","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-public","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_subnet.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-private-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1c","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"rocket-pool-mainnet-00-public-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00-public-us-east-1c","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.this[0]","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"this","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":false,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"},"tags_all":{"Name":"rocket-pool-mainnet-00","billing":"rocketpool","nodes":"core","rocket_pool":"mainnet-00"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"tls_private_key.ssh_keypair","mode":"managed","type":"tls_private_key","name":"ssh_keypair","provider_name":"registry.terraform.io/hashicorp/tls","change":{"actions":["create"],"before":null,"after":{"algorithm":"RSA","ecdsa_curve":"P224","rsa_bits":2048},"after_unknown":{"id":true,"private_key_pem":true,"public_key_fingerprint_md5":true,"public_key_openssh":true,"public_key_pem":true},"before_sensitive":false,"after_sensitive":{"private_key_pem":true}}}],"output_changes":{"alerts_by_node":{"actions":["create"],"before":null,"after":{"cpu":{"alarm_description":"CPU Utilization is over 85% for 6 minutes on core node.","alarm_name":"cpu-utilization-high","comparison_operator":"GreaterThanOrEqualToThreshold","evaluation_periods":"3","metric_name":"CPUUtilization","namespace":"AWS/EC2","node_name":"core0","period":"120","statistic":"Average","threshold":"85"},"instance":{"alarm_description":"An instance in the rocketpool ASG is terminating","alarm_name":"instance-termination","comparison_operator":"GreaterThanOrEqualToThreshold","evaluation_periods":"1","metric_name":"GreaterThanOrEqualToThreshold","namespace":"AWS/AutoScaling","node_name":"core0","period":"120","statistic":"Average","threshold":"1"},"service":{"alarm_description":"Rocketpool ASG has less than 1 instances in service.","alarm_name":"in-service-instances","comparison_operator":"LessThanOrEqualToThreshold","evaluation_periods":"1","metric_name":"GroupInServiceInstances","namespace":"AWS/AutoScaling","node_name":"core0","period":"120","statistic":"Average","threshold":"0"}},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"node_public_ips":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ssh_private_key":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":true,"after_sensitive":true},"vpc_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"0.2","terraform_version":"1.0.7","values":{"outputs":{"alerts_by_node":{"sensitive":false,"value":{"cpu":{"alarm_description":"CPU Utilization is over 85% for 6 minutes on core node.","alarm_name":"cpu-utilization-high","comparison_operator":"GreaterThanOrEqualToThreshold","evaluation_periods":"3","metric_name":"CPUUtilization","namespace":"AWS/EC2","node_name":"core0","period":"120","statistic":"Average","threshold":"85"},"instance":{"alarm_description":"An instance in the rocketpool ASG is terminating","alarm_name":"instance-termination","comparison_operator":"GreaterThanOrEqualToThreshold","evaluation_periods":"1","metric_name":"GreaterThanOrEqualToThreshold","namespace":"AWS/AutoScaling","node_name":"core0","period":"120","statistic":"Average","threshold":"1"},"service":{"alarm_description":"Rocketpool ASG has less than 1 instances in service.","alarm_name":"in-service-instances","comparison_operator":"LessThanOrEqualToThreshold","evaluation_periods":"1","metric_name":"GroupInServiceInstances","namespace":"AWS/AutoScaling","node_name":"core0","period":"120","statistic":"Average","threshold":"0"}}}},"root_module":{"resources":[{"address":"data.aws_ami.ubuntu","mode":"data","type":"aws_ami","name":"ubuntu","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-089b5711e63812c2a","block_device_mappings":[{"device_name":"/dev/sda1","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0adea7b2e58fde8d0","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""},{"device_name":"/dev/sdb","ebs":{},"no_device":"","virtual_name":"ephemeral0"},{"device_name":"/dev/sdc","ebs":{},"no_device":"","virtual_name":"ephemeral1"}],"creation_date":"2021-09-28T00:25:46.000Z","description":"Canonical, Ubuntu, 20.04 LTS, amd64 focal image build on 2021-09-27","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-089b5711e63812c2a","image_id":"ami-089b5711e63812c2a","image_location":"099720109477/ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210927","image_owner_alias":null,"image_type":"machine","kernel_id":null,"most_recent":true,"name":"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210927","name_regex":null,"owner_id":"099720109477","owners":["099720109477"],"platform":null,"platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":null,"root_device_name":"/dev/sda1","root_device_type":"ebs","root_snapshot_id":"snap-0adea7b2e58fde8d0","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}},{"ebs":{}},{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"data.aws_iam_policy_document.assume_role[\"core0\"]","mode":"data","type":"aws_iam_policy_document","name":"assume_role","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1903849331","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.ebs_attach[\"core0\"]","mode":"data","type":"aws_iam_policy_document","name":"ebs_attach","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"913332733","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:AttachVolume\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ec2:ResourceTag/Name\": [\n            \"rocket-pool-mainnet-00-node-core0\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeVolumes\",\n        \"ec2:DescribeVolumeStatus\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:AttachVolume"],"condition":[{"test":"StringLike","values":["rocket-pool-mainnet-00-node-core0"],"variable":"ec2:ResourceTag/Name"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:DescribeVolumeStatus","ec2:DescribeVolumes"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"data.aws_iam_policy_document.eip_attach[\"core0\"]","mode":"data","type":"aws_iam_policy_document","name":"eip_attach","index":"core0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2303592296","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ec2:AssociateAddress\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringLike\": {\n          \"ec2:ResourceTag/Name\": [\n            \"rocket-pool-mainnet-00-node-core0\"\n          ]\n        }\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeAddresses\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["ec2:AssociateAddress"],"condition":[{"test":"StringLike","values":["rocket-pool-mainnet-00-node-core0"],"variable":"ec2:ResourceTag/Name"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""},{"actions":["ec2:DescribeAddresses","ec2:DescribeInstances","ec2:DescribeNetworkInterfaces"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}},{"address":"data.external.tar_sh","mode":"data","type":"external","name":"tar_sh","provider_name":"registry.terraform.io/hashicorp/external","schema_version":0,"values":{"id":"-","program":["./tar.sh","-cvzf","./ansible-v1.0.0-pre.tar.gz","./../ansible ./../vars ./../requirements.txt"],"query":null,"result":{"result":"success"},"working_dir":null},"sensitive_values":{"program":[false,false,false,false],"result":{}}},{"address":"data.http.workstation_public_ip[0]","mode":"data","type":"http","name":"workstation_public_ip","index":0,"provider_name":"registry.terraform.io/hashicorp/http","schema_version":0,"values":{"body":"108.53.159.21","id":"https://ifconfig.me/ip","request_headers":null,"response_headers":{"Access-Control-Allow-Origin":"*","Alt-Svc":"clear","Content-Length":"13","Content-Type":"text/plain; charset=utf-8","Date":"Thu, 30 Sep 2021 23:31:38 GMT","Via":"1.1 google","X-Envoy-Upstream-Service-Time":"1"},"url":"https://ifconfig.me/ip"},"sensitive_values":{"response_headers":{}}},{"address":"data.template_file.tar_sh","mode":"data","type":"template_file","name":"tar_sh","provider_name":"registry.terraform.io/hashicorp/template","schema_version":0,"values":{"filename":null,"id":"34926a6a30325228dcd7ce2f727ab7bb436ad53849ccd41bf1dc29b90408de2c","rendered":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n","template":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n","vars":null},"sensitive_values":{}},{"address":"local_file.tar_sh","mode":"managed","type":"local_file","name":"tar_sh","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"./tar.sh","id":"c02c14479e06eb06d7e8dfdd85d03bf6b7fd2320","sensitive_content":null,"source":null},"sensitive_values":{},"depends_on":["data.template_file.tar_sh"]}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","version_constraint":"\u003c 4.0.0","expressions":{"region":{"references":["local.aws_vars.region","local.aws_vars"]}}},"module.cloudwatch_metric_alarms:aws":{"name":"aws","version_constraint":"\u003e= 2.55.0","module_address":"module.cloudwatch_metric_alarms"},"module.notify_slack.module.lambda:aws":{"name":"aws","version_constraint":"\u003e= 3.19.0","module_address":"module.notify_slack.module.lambda"},"module.notify_slack.module.lambda:external":{"name":"external","version_constraint":"\u003e= 1.0.0","module_address":"module.notify_slack.module.lambda"},"module.notify_slack.module.lambda:local":{"name":"local","version_constraint":"\u003e= 1.0.0","module_address":"module.notify_slack.module.lambda"},"module.notify_slack.module.lambda:null":{"name":"null","version_constraint":"\u003e= 2.0.0","module_address":"module.notify_slack.module.lambda"},"module.notify_slack.module.lambda:random":{"name":"random","version_constraint":"\u003e= 2.0.0","module_address":"module.notify_slack.module.lambda"},"module.notify_slack:aws":{"name":"aws","version_constraint":"\u003e= 2.35.0","module_address":"module.notify_slack"},"module.vpc:aws":{"name":"aws","version_constraint":"\u003e= 3.38.0","module_address":"module.vpc"},"tls":{"name":"tls","version_constraint":"\u003c 4.0.0"}},"root_module":{"outputs":{"alerts_by_node":{"expression":{"references":["local.alerts_by_node"]}},"node_public_ips":{"expression":{"references":["aws_eip.node"]}},"ssh_private_key":{"sensitive":true,"expression":{"references":["tls_private_key.ssh_keypair.private_key_pem","tls_private_key.ssh_keypair"]}},"vpc_id":{"expression":{"references":["module.vpc.vpc_id","module.vpc"]}}},"resources":[{"address":"aws_autoscaling_group.node","mode":"managed","type":"aws_autoscaling_group","name":"node","provider_config_key":"aws","expressions":{"desired_capacity":{"constant_value":1},"enabled_metrics":{"constant_value":["GroupInServiceInstances","GroupTerminatingInstances"]},"launch_template":[{"id":{"references":["aws_launch_template.node","each.key"]},"version":{"constant_value":"$Latest"}}],"max_size":{"constant_value":1},"min_size":{"constant_value":1},"vpc_zone_identifier":{"references":["each.value.subnet","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"aws_ebs_volume.node_data","mode":"managed","type":"aws_ebs_volume","name":"node_data","provider_config_key":"aws","expressions":{"availability_zone":{"references":["local.aws_vars.vpc.az","local.aws_vars.vpc","local.aws_vars"]},"encrypted":{"constant_value":true},"size":{"references":["each.value.ebs_volume_size","each.value"]},"tags":{"references":["local.default_tags","local.name_prefix","each.key"]},"type":{"constant_value":"gp3"}},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"aws_eip.node","mode":"managed","type":"aws_eip","name":"node","provider_config_key":"aws","expressions":{"tags":{"references":["local.default_tags","local.name_prefix","each.key"]},"vpc":{"constant_value":true}},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"aws_iam_instance_profile.node","mode":"managed","type":"aws_iam_instance_profile","name":"node","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix","each.key"]},"role":{"references":["aws_iam_role.node","each.key"]},"tags":{"references":["local.default_tags","local.name_prefix","each.key"]}},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"aws_iam_role.node","mode":"managed","type":"aws_iam_role","name":"node","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role","each.key"]},"inline_policy":[{"name":{"constant_value":"ebs-attach"},"policy":{"references":["data.aws_iam_policy_document.ebs_attach","each.key"]}},{"name":{"constant_value":"s3-deploy"},"policy":{"references":["data.aws_iam_policy_document.s3_deploy.json","data.aws_iam_policy_document.s3_deploy"]}}],"name":{"references":["local.name_prefix","each.key"]},"tags":{"references":["local.default_tags","local.name_prefix","each.key"]}},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"aws_key_pair.common","mode":"managed","type":"aws_key_pair","name":"common","provider_config_key":"aws","expressions":{"key_name":{"references":["local.name_prefix"]},"public_key":{"references":["tls_private_key.ssh_keypair.public_key_openssh","tls_private_key.ssh_keypair"]},"tags":{"references":["local.default_tags"]}},"schema_version":1},{"address":"aws_launch_template.node","mode":"managed","type":"aws_launch_template","name":"node","provider_config_key":"aws","expressions":{"block_device_mappings":[{"device_name":{"constant_value":"/dev/sda1"},"ebs":[{"delete_on_termination":{"constant_value":true},"encrypted":{"constant_value":true},"volume_size":{"constant_value":20},"volume_type":{"constant_value":"gp3"}}]}],"disable_api_termination":{"constant_value":true},"iam_instance_profile":[{"name":{"references":["aws_iam_instance_profile.node","each.key"]}}],"image_id":{"references":["data.aws_ami.ubuntu.image_id","data.aws_ami.ubuntu"]},"instance_type":{"references":["local.aws_vars.ec2","local.aws_vars","each.value.type","each.value"]},"key_name":{"references":["each.value.keypair","each.value","aws_key_pair.common.key_name","aws_key_pair.common"]},"name_prefix":{"references":["local.name_prefix","each.key"]},"tags":{"references":["local.default_tags","local.name_prefix","each.key"]},"update_default_version":{"constant_value":true},"user_data":{"references":["data.template_cloudinit_config.node","each.key"]},"vpc_security_group_ids":{"references":["aws_security_group.common.id","aws_security_group.common","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"aws_s3_bucket.deploy","mode":"managed","type":"aws_s3_bucket","name":"deploy","provider_config_key":"aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.aws_vars.s3.buckets.deploy.name","local.aws_vars.s3.buckets.deploy","local.aws_vars.s3.buckets","local.aws_vars.s3","local.aws_vars"]},"logging":[{"target_bucket":{"references":["aws_s3_bucket.log_bucket.id","aws_s3_bucket.log_bucket"]},"target_prefix":{"constant_value":"log/"}}],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]}],"tags":{"references":["local.default_tags"]},"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket.log_bucket","mode":"managed","type":"aws_s3_bucket","name":"log_bucket","provider_config_key":"aws","expressions":{"acl":{"constant_value":"log-delivery-write"},"bucket":{"constant_value":"cloudstruct-rocketpool-access-log"},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]}],"tags":{"references":["local.default_tags"]}},"schema_version":0},{"address":"aws_s3_bucket_object.ansible_tar_gz","mode":"managed","type":"aws_s3_bucket_object","name":"ansible_tar_gz","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.deploy.id","aws_s3_bucket.deploy"]},"etag":{"references":["path.root","local.rp_vars.rocketpool.version","local.rp_vars.rocketpool","local.rp_vars"]},"key":{"references":["local.rp_vars.rocketpool.version","local.rp_vars.rocketpool","local.rp_vars"]},"source":{"references":["path.root","local.rp_vars.rocketpool.version","local.rp_vars.rocketpool","local.rp_vars"]},"tags":{"references":["local.default_tags"]}},"schema_version":0,"depends_on":["data.external.tar_sh"]},{"address":"aws_security_group.common","mode":"managed","type":"aws_security_group","name":"common","provider_config_key":"aws","expressions":{"description":{"references":["local.pool"]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.default_tags","local.name_prefix"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"schema_version":1},{"address":"aws_security_group.core_node","mode":"managed","type":"aws_security_group","name":"core_node","provider_config_key":"aws","expressions":{"description":{"references":["local.pool"]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.default_tags","local.name_prefix"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"schema_version":1},{"address":"local_file.tar_sh","mode":"managed","type":"local_file","name":"tar_sh","provider_config_key":"local","expressions":{"content":{"references":["data.template_file.tar_sh.rendered","data.template_file.tar_sh"]},"filename":{"references":["path.module"]}},"schema_version":0},{"address":"tls_private_key.ssh_keypair","mode":"managed","type":"tls_private_key","name":"ssh_keypair","provider_config_key":"tls","expressions":{"algorithm":{"constant_value":"RSA"}},"schema_version":0},{"address":"data.aws_ami.ubuntu","mode":"data","type":"aws_ami","name":"ubuntu","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"]}},{"name":{"constant_value":"virtualization-type"},"values":{"constant_value":["hvm"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["099720109477"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.assume_role","mode":"data","type":"aws_iam_policy_document","name":"assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"data.aws_iam_policy_document.ebs_attach","mode":"data","type":"aws_iam_policy_document","name":"ebs_attach","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:AttachVolume"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"references":["local.name_prefix","each.key"]},"variable":{"constant_value":"ec2:ResourceTag/Name"}}],"resources":{"constant_value":["*"]}},{"actions":{"constant_value":["ec2:DescribeVolumes","ec2:DescribeVolumeStatus"]},"resources":{"constant_value":["*"]}}]},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"data.aws_iam_policy_document.eip_attach","mode":"data","type":"aws_iam_policy_document","name":"eip_attach","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["ec2:AssociateAddress"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"references":["local.name_prefix","each.key"]},"variable":{"constant_value":"ec2:ResourceTag/Name"}}],"resources":{"constant_value":["*"]}},{"actions":{"constant_value":["ec2:DescribeAddresses","ec2:DescribeInstances","ec2:DescribeNetworkInterfaces"]},"resources":{"constant_value":["*"]}}]},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"data.aws_iam_policy_document.s3_deploy","mode":"data","type":"aws_iam_policy_document","name":"s3_deploy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:ListBucket","s3:GetBucketLocation"]},"resources":{"references":["aws_s3_bucket.deploy.arn","aws_s3_bucket.deploy"]}},{"actions":{"constant_value":["s3:PutObject","s3:GetObject","s3:DeleteObject"]},"resources":{"references":["aws_s3_bucket.deploy.arn","aws_s3_bucket.deploy"]}}]},"schema_version":0},{"address":"data.external.tar_sh","mode":"data","type":"external","name":"tar_sh","provider_config_key":"external","expressions":{"program":{"references":["local_file.tar_sh.filename","local_file.tar_sh","path.root","local.rp_vars.rocketpool.version","local.rp_vars.rocketpool","local.rp_vars","local.bundle_files"]}},"schema_version":0,"depends_on":["data.template_file.tar_sh"]},{"address":"data.http.workstation_public_ip","mode":"data","type":"http","name":"workstation_public_ip","provider_config_key":"http","expressions":{"url":{"constant_value":"https://ifconfig.me/ip"}},"schema_version":0,"count_expression":{"references":["local.node_vars.global.ssh.allow_workstation_ip","local.node_vars.global.ssh","local.node_vars.global","local.node_vars"]}},{"address":"data.template_cloudinit_config.node","mode":"data","type":"template_cloudinit_config","name":"node","provider_config_key":"template","expressions":{"gzip":{"constant_value":false},"part":[{"content":{"references":["path.root","local.bootstrap_template_vars","each.key","each.value"]},"content_type":{"constant_value":"text/cloud-config"},"filename":{"constant_value":"init.cfg"}}]},"schema_version":0,"for_each_expression":{"references":["local.nodes"]}},{"address":"data.template_file.tar_sh","mode":"data","type":"template_file","name":"tar_sh","provider_config_key":"template","expressions":{"template":{"constant_value":"#!/bin/bash\ntar $* %1\u003e/dev/null %2\u003e/dev/null\necho '{\"result\":\"success\"}'\n"}},"schema_version":0}],"module_calls":{"cloudwatch_metric_alarms":{"source":"terraform-aws-modules/cloudwatch/aws//modules/metric-alarm","expressions":{"alarm_actions":{"references":["module.notify_slack.this_slack_topic_arn","module.notify_slack"]},"alarm_description":{"references":["each.value.alarm_description","each.value"]},"alarm_name":{"references":["local.pool","each.value.node_name","each.value","each.value.alarm_name","each.value"]},"comparison_operator":{"references":["each.value.comparison_operator","each.value"]},"dimensions":{"references":["aws_autoscaling_group.node","each.value.node_name","each.value"]},"evaluation_periods":{"references":["each.value.evaluation_periods","each.value"]},"metric_name":{"references":["each.value.metric_name","each.value"]},"namespace":{"references":["each.value.namespace","each.value"]},"ok_actions":{"references":["module.notify_slack.this_slack_topic_arn","module.notify_slack"]},"period":{"references":["each.value.period","each.value"]},"statistic":{"references":["each.value.statistic","each.value"]},"threshold":{"references":["each.value.threshold","each.value"]},"unit":{"references":["each.value.unit","each.value"]}},"for_each_expression":{"references":["local.alerts_by_node"]},"module":{"outputs":{"cloudwatch_metric_alarm_arn":{"expression":{"references":["aws_cloudwatch_metric_alarm.this"]},"description":"The ARN of the Cloudwatch metric alarm."},"cloudwatch_metric_alarm_id":{"expression":{"references":["aws_cloudwatch_metric_alarm.this"]},"description":"The ID of the Cloudwatch metric alarm."}},"resources":[{"address":"aws_cloudwatch_metric_alarm.this","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"this","provider_config_key":"cloudwatch_metric_alarms:aws","expressions":{"actions_enabled":{"references":["var.actions_enabled"]},"alarm_actions":{"references":["var.alarm_actions"]},"alarm_description":{"references":["var.alarm_description"]},"alarm_name":{"references":["var.alarm_name"]},"comparison_operator":{"references":["var.comparison_operator"]},"datapoints_to_alarm":{"references":["var.datapoints_to_alarm"]},"dimensions":{"references":["var.dimensions"]},"evaluate_low_sample_count_percentiles":{"references":["var.evaluate_low_sample_count_percentiles"]},"evaluation_periods":{"references":["var.evaluation_periods"]},"extended_statistic":{"references":["var.extended_statistic"]},"insufficient_data_actions":{"references":["var.insufficient_data_actions"]},"metric_name":{"references":["var.metric_name"]},"namespace":{"references":["var.namespace"]},"ok_actions":{"references":["var.ok_actions"]},"period":{"references":["var.period"]},"statistic":{"references":["var.statistic"]},"tags":{"references":["var.tags"]},"threshold":{"references":["var.threshold"]},"treat_missing_data":{"references":["var.treat_missing_data"]},"unit":{"references":["var.unit"]}},"schema_version":1,"count_expression":{"references":["var.create_metric_alarm"]}}],"variables":{"actions_enabled":{"default":true,"description":"Indicates whether or not actions should be executed during any changes to the alarm's state. Defaults to true."},"alarm_actions":{"default":null,"description":"The list of actions to execute when this alarm transitions into an ALARM state from any other state. Each action is specified as an Amazon Resource Name (ARN)."},"alarm_description":{"default":null,"description":"The description for the alarm."},"alarm_name":{"description":"The descriptive name for the alarm. This name must be unique within the user's AWS account."},"comparison_operator":{"description":"The arithmetic operation to use when comparing the specified Statistic and Threshold. The specified Statistic value is used as the first operand. Either of the following is supported: GreaterThanOrEqualToThreshold, GreaterThanThreshold, LessThanThreshold, LessThanOrEqualToThreshold."},"create_metric_alarm":{"default":true,"description":"Whether to create the Cloudwatch metric alarm"},"datapoints_to_alarm":{"default":null,"description":"The number of datapoints that must be breaching to trigger the alarm."},"dimensions":{"default":null,"description":"The dimensions for the alarm's associated metric."},"evaluate_low_sample_count_percentiles":{"default":null,"description":"Used only for alarms based on percentiles. If you specify ignore, the alarm state will not change during periods with too few data points to be statistically significant. If you specify evaluate or omit this parameter, the alarm will always be evaluated and possibly change state no matter how many data points are available. The following values are supported: ignore, and evaluate."},"evaluation_periods":{"description":"The number of periods over which data is compared to the specified threshold."},"extended_statistic":{"default":null,"description":"The percentile statistic for the metric associated with the alarm. Specify a value between p0.0 and p100."},"insufficient_data_actions":{"default":null,"description":"The list of actions to execute when this alarm transitions into an INSUFFICIENT_DATA state from any other state. Each action is specified as an Amazon Resource Name (ARN)."},"metric_name":{"default":null,"description":"The name for the alarm's associated metric. See docs for supported metrics."},"metric_query":{"default":[],"description":"Enables you to create an alarm based on a metric math expression. You may specify at most 20."},"namespace":{"default":null,"description":"The namespace for the alarm's associated metric. See docs for the list of namespaces. See docs for supported metrics."},"ok_actions":{"default":null,"description":"The list of actions to execute when this alarm transitions into an OK state from any other state. Each action is specified as an Amazon Resource Name (ARN)."},"period":{"default":null,"description":"The period in seconds over which the specified statistic is applied."},"statistic":{"default":null,"description":"The statistic to apply to the alarm's associated metric. Either of the following is supported: SampleCount, Average, Sum, Minimum, Maximum"},"tags":{"default":{},"description":"A mapping of tags to assign to all resources"},"threshold":{"description":"The value against which the specified statistic is compared."},"treat_missing_data":{"default":"missing","description":"Sets how this alarm is to handle missing data points. The following values are supported: missing, ignore, breaching and notBreaching."},"unit":{"default":null,"description":"The unit for the alarm's associated metric."}}},"version_constraint":"2.1"},"notify_slack":{"source":"terraform-aws-modules/notify-slack/aws","expressions":{"slack_channel":{"references":["local.aws_vars.sns.slack.channel","local.aws_vars.sns.slack","local.aws_vars.sns","local.aws_vars"]},"slack_username":{"constant_value":"CloudWatch"},"slack_webhook_url":{"references":["local.aws_vars.sns.slack.webhook","local.aws_vars.sns.slack","local.aws_vars.sns","local.aws_vars"]},"sns_topic_name":{"references":["local.aws_vars.sns.slack.topic_name","local.aws_vars.sns.slack","local.aws_vars.sns","local.aws_vars"]}},"count_expression":{"references":["local.aws_vars.sns","local.aws_vars"]},"module":{"outputs":{"lambda_cloudwatch_log_group_arn":{"expression":{"references":["aws_cloudwatch_log_group.lambda"]},"description":"The Amazon Resource Name (ARN) specifying the log group"},"lambda_iam_role_arn":{"expression":{"references":["module.lambda.lambda_role_arn","module.lambda"]},"description":"The ARN of the IAM role used by Lambda function"},"lambda_iam_role_name":{"expression":{"references":["module.lambda.lambda_role_name","module.lambda"]},"description":"The name of the IAM role used by Lambda function"},"notify_slack_lambda_function_arn":{"expression":{"references":["module.lambda.this_lambda_function_arn","module.lambda"]},"description":"The ARN of the Lambda function"},"notify_slack_lambda_function_invoke_arn":{"expression":{"references":["module.lambda.this_lambda_function_invoke_arn","module.lambda"]},"description":"The ARN to be used for invoking Lambda function from API Gateway"},"notify_slack_lambda_function_last_modified":{"expression":{"references":["module.lambda.this_lambda_function_last_modified","module.lambda"]},"description":"The date Lambda function was last modified"},"notify_slack_lambda_function_name":{"expression":{"references":["module.lambda.this_lambda_function_name","module.lambda"]},"description":"The name of the Lambda function"},"notify_slack_lambda_function_version":{"expression":{"references":["module.lambda.this_lambda_function_version","module.lambda"]},"description":"Latest published version of your Lambda function"},"this_slack_topic_arn":{"expression":{"references":["local.sns_topic_arn"]},"description":"The ARN of the SNS topic from which messages will be sent to Slack"}},"resources":[{"address":"aws_cloudwatch_log_group.lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda","provider_config_key":"notify_slack:aws","expressions":{"kms_key_id":{"references":["var.cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.lambda_function_name"]},"retention_in_days":{"references":["var.cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags","var.cloudwatch_log_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"aws_sns_topic.this","mode":"managed","type":"aws_sns_topic","name":"this","provider_config_key":"notify_slack:aws","expressions":{"kms_master_key_id":{"references":["var.sns_topic_kms_key_id"]},"name":{"references":["var.sns_topic_name"]},"tags":{"references":["var.tags","var.sns_topic_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_sns_topic","var.create"]}},{"address":"aws_sns_topic_subscription.sns_notify_slack","mode":"managed","type":"aws_sns_topic_subscription","name":"sns_notify_slack","provider_config_key":"notify_slack:aws","expressions":{"endpoint":{"references":["module.lambda.this_lambda_function_arn","module.lambda"]},"filter_policy":{"references":["var.subscription_filter_policy"]},"protocol":{"constant_value":"lambda"},"topic_arn":{"references":["local.sns_topic_arn"]}},"schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"notify_slack:aws","schema_version":0},{"address":"data.aws_iam_policy_document.lambda","mode":"data","type":"aws_iam_policy_document","name":"lambda","provider_config_key":"notify_slack:aws","schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"notify_slack:aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"notify_slack:aws","schema_version":0}],"module_calls":{"lambda":{"source":"terraform-aws-modules/lambda/aws","expressions":{"allowed_triggers":{"references":["local.sns_topic_arn"]},"attach_cloudwatch_logs_policy":{"constant_value":false},"attach_network_policy":{"references":["var.lambda_function_vpc_subnet_ids"]},"attach_policy_json":{"constant_value":true},"create":{"references":["var.create"]},"create_role":{"references":["var.lambda_role"]},"description":{"references":["var.lambda_description"]},"environment_variables":{"references":["var.slack_webhook_url","var.slack_channel","var.slack_username","var.slack_emoji","var.log_events"]},"function_name":{"references":["var.lambda_function_name"]},"handler":{"constant_value":"notify_slack.lambda_handler"},"kms_key_arn":{"references":["var.kms_key_arn"]},"lambda_role":{"references":["var.lambda_role"]},"policy_json":{"references":["data.aws_iam_policy_document.lambda"]},"publish":{"constant_value":true},"reserved_concurrent_executions":{"references":["var.reserved_concurrent_executions"]},"role_name":{"references":["var.iam_role_name_prefix","var.lambda_function_name"]},"role_permissions_boundary":{"references":["var.iam_role_boundary_policy_arn"]},"role_tags":{"references":["var.iam_role_tags"]},"runtime":{"constant_value":"python3.8"},"s3_bucket":{"references":["var.lambda_function_s3_bucket"]},"source_path":{"references":["path.module"]},"store_on_s3":{"references":["var.lambda_function_store_on_s3"]},"tags":{"references":["var.tags","var.lambda_function_tags"]},"timeout":{"constant_value":30},"use_existing_cloudwatch_log_group":{"constant_value":true},"vpc_security_group_ids":{"references":["var.lambda_function_vpc_security_group_ids"]},"vpc_subnet_ids":{"references":["var.lambda_function_vpc_subnet_ids"]}},"module":{"outputs":{"lambda_cloudwatch_log_group_arn":{"expression":{"references":["local.log_group_arn"]},"description":"The ARN of the Cloudwatch Log Group"},"lambda_cloudwatch_log_group_name":{"expression":{"references":["local.log_group_name"]},"description":"The name of the Cloudwatch Log Group"},"lambda_role_arn":{"expression":{"references":["aws_iam_role.lambda"]},"description":"The ARN of the IAM role created for the Lambda Function"},"lambda_role_name":{"expression":{"references":["aws_iam_role.lambda"]},"description":"The name of the IAM role created for the Lambda Function"},"local_filename":{"expression":{"references":["local.filename"]},"description":"The filename of zip archive deployed (if deployment was from local)"},"s3_object":{"expression":{"references":["local.s3_bucket","local.s3_key","local.s3_object_version"]},"description":"The map with S3 object data of zip archive deployed (if deployment was from S3)"},"this_lambda_event_source_mapping_function_arn":{"expression":{"references":["aws_lambda_event_source_mapping.this"]},"description":"The the ARN of the Lambda function the event source mapping is sending events to"},"this_lambda_event_source_mapping_state":{"expression":{"references":["aws_lambda_event_source_mapping.this"]},"description":"The state of the event source mapping"},"this_lambda_event_source_mapping_state_transition_reason":{"expression":{"references":["aws_lambda_event_source_mapping.this"]},"description":"The reason the event source mapping is in its current state"},"this_lambda_event_source_mapping_uuid":{"expression":{"references":["aws_lambda_event_source_mapping.this"]},"description":"The UUID of the created event source mapping"},"this_lambda_function_arn":{"expression":{"references":["aws_lambda_function.this"]},"description":"The ARN of the Lambda Function"},"this_lambda_function_invoke_arn":{"expression":{"references":["aws_lambda_function.this"]},"description":"The Invoke ARN of the Lambda Function"},"this_lambda_function_kms_key_arn":{"expression":{"references":["aws_lambda_function.this"]},"description":"The ARN for the KMS encryption key of Lambda Function"},"this_lambda_function_last_modified":{"expression":{"references":["aws_lambda_function.this"]},"description":"The date Lambda Function resource was last modified"},"this_lambda_function_name":{"expression":{"references":["aws_lambda_function.this"]},"description":"The name of the Lambda Function"},"this_lambda_function_qualified_arn":{"expression":{"references":["aws_lambda_function.this"]},"description":"The ARN identifying your Lambda Function Version"},"this_lambda_function_source_code_hash":{"expression":{"references":["aws_lambda_function.this"]},"description":"Base64-encoded representation of raw SHA-256 sum of the zip file"},"this_lambda_function_source_code_size":{"expression":{"references":["aws_lambda_function.this"]},"description":"The size in bytes of the function .zip file"},"this_lambda_function_version":{"expression":{"references":["aws_lambda_function.this"]},"description":"Latest published version of Lambda Function"},"this_lambda_layer_arn":{"expression":{"references":["aws_lambda_layer_version.this"]},"description":"The ARN of the Lambda Layer with version"},"this_lambda_layer_created_date":{"expression":{"references":["aws_lambda_layer_version.this"]},"description":"The date Lambda Layer resource was created"},"this_lambda_layer_layer_arn":{"expression":{"references":["aws_lambda_layer_version.this"]},"description":"The ARN of the Lambda Layer without version"},"this_lambda_layer_source_code_size":{"expression":{"references":["aws_lambda_layer_version.this"]},"description":"The size in bytes of the Lambda Layer .zip file"},"this_lambda_layer_version":{"expression":{"references":["aws_lambda_layer_version.this"]},"description":"The Lambda Layer version"}},"resources":[{"address":"aws_cloudwatch_log_group.lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda","provider_config_key":"lambda:aws","expressions":{"kms_key_id":{"references":["var.cloudwatch_logs_kms_key_id"]},"name":{"references":["var.lambda_at_edge","var.function_name"]},"retention_in_days":{"references":["var.cloudwatch_logs_retention_in_days"]},"tags":{"references":["var.tags","var.cloudwatch_logs_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_function","var.create_layer","var.use_existing_cloudwatch_log_group"]}},{"address":"aws_iam_policy.additional_inline","mode":"managed","type":"aws_iam_policy","name":"additional_inline","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["data.aws_iam_policy_document.additional_inline[0].json","data.aws_iam_policy_document.additional_inline[0]","data.aws_iam_policy_document.additional_inline"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_statements"]}},{"address":"aws_iam_policy.additional_json","mode":"managed","type":"aws_iam_policy","name":"additional_json","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["var.policy_json"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_json"]}},{"address":"aws_iam_policy.additional_jsons","mode":"managed","type":"aws_iam_policy","name":"additional_jsons","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name","count.index"]},"policy":{"references":["var.policy_jsons","count.index"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_jsons","var.number_of_policy_jsons"]}},{"address":"aws_iam_policy.async","mode":"managed","type":"aws_iam_policy","name":"async","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["data.aws_iam_policy_document.async[0].json","data.aws_iam_policy_document.async[0]","data.aws_iam_policy_document.async"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_async_event_policy"]}},{"address":"aws_iam_policy.dead_letter","mode":"managed","type":"aws_iam_policy","name":"dead_letter","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["data.aws_iam_policy_document.dead_letter[0].json","data.aws_iam_policy_document.dead_letter[0]","data.aws_iam_policy_document.dead_letter"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_dead_letter_policy"]}},{"address":"aws_iam_policy.logs","mode":"managed","type":"aws_iam_policy","name":"logs","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["data.aws_iam_policy_document.logs[0].json","data.aws_iam_policy_document.logs[0]","data.aws_iam_policy_document.logs"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_cloudwatch_logs_policy"]}},{"address":"aws_iam_policy.tracing","mode":"managed","type":"aws_iam_policy","name":"tracing","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["data.aws_iam_policy.tracing[0].policy","data.aws_iam_policy.tracing[0]","data.aws_iam_policy.tracing"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_tracing_policy"]}},{"address":"aws_iam_policy.vpc","mode":"managed","type":"aws_iam_policy","name":"vpc","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy":{"references":["data.aws_iam_policy.vpc[0].policy","data.aws_iam_policy.vpc[0]","data.aws_iam_policy.vpc"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_network_policy"]}},{"address":"aws_iam_policy_attachment.additional_inline","mode":"managed","type":"aws_iam_policy_attachment","name":"additional_inline","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.additional_inline[0].arn","aws_iam_policy.additional_inline[0]","aws_iam_policy.additional_inline"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_statements"]}},{"address":"aws_iam_policy_attachment.additional_json","mode":"managed","type":"aws_iam_policy_attachment","name":"additional_json","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.additional_json[0].arn","aws_iam_policy.additional_json[0]","aws_iam_policy.additional_json"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_json"]}},{"address":"aws_iam_policy_attachment.additional_jsons","mode":"managed","type":"aws_iam_policy_attachment","name":"additional_jsons","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name","count.index"]},"policy_arn":{"references":["aws_iam_policy.additional_jsons","count.index"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_jsons","var.number_of_policy_jsons"]}},{"address":"aws_iam_policy_attachment.async","mode":"managed","type":"aws_iam_policy_attachment","name":"async","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.async[0].arn","aws_iam_policy.async[0]","aws_iam_policy.async"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_async_event_policy"]}},{"address":"aws_iam_policy_attachment.dead_letter","mode":"managed","type":"aws_iam_policy_attachment","name":"dead_letter","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.dead_letter[0].arn","aws_iam_policy.dead_letter[0]","aws_iam_policy.dead_letter"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_dead_letter_policy"]}},{"address":"aws_iam_policy_attachment.logs","mode":"managed","type":"aws_iam_policy_attachment","name":"logs","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.logs[0].arn","aws_iam_policy.logs[0]","aws_iam_policy.logs"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_cloudwatch_logs_policy"]}},{"address":"aws_iam_policy_attachment.tracing","mode":"managed","type":"aws_iam_policy_attachment","name":"tracing","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.tracing[0].arn","aws_iam_policy.tracing[0]","aws_iam_policy.tracing"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_tracing_policy"]}},{"address":"aws_iam_policy_attachment.vpc","mode":"managed","type":"aws_iam_policy_attachment","name":"vpc","provider_config_key":"lambda:aws","expressions":{"name":{"references":["local.role_name"]},"policy_arn":{"references":["aws_iam_policy.vpc[0].arn","aws_iam_policy.vpc[0]","aws_iam_policy.vpc"]},"roles":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_network_policy"]}},{"address":"aws_iam_role.lambda","mode":"managed","type":"aws_iam_role","name":"lambda","provider_config_key":"lambda:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role[0].json","data.aws_iam_policy_document.assume_role[0]","data.aws_iam_policy_document.assume_role"]},"description":{"references":["var.role_description"]},"force_detach_policies":{"references":["var.role_force_detach_policies"]},"name":{"references":["local.role_name"]},"path":{"references":["var.role_path"]},"permissions_boundary":{"references":["var.role_permissions_boundary"]},"tags":{"references":["var.tags","var.role_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_role"]}},{"address":"aws_iam_role_policy_attachment.additional_many","mode":"managed","type":"aws_iam_role_policy_attachment","name":"additional_many","provider_config_key":"lambda:aws","expressions":{"policy_arn":{"references":["var.policies","count.index"]},"role":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policies","var.number_of_policies"]}},{"address":"aws_iam_role_policy_attachment.additional_one","mode":"managed","type":"aws_iam_role_policy_attachment","name":"additional_one","provider_config_key":"lambda:aws","expressions":{"policy_arn":{"references":["var.policy"]},"role":{"references":["aws_iam_role.lambda[0].name","aws_iam_role.lambda[0]","aws_iam_role.lambda"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy"]}},{"address":"aws_lambda_event_source_mapping.this","mode":"managed","type":"aws_lambda_event_source_mapping","name":"this","provider_config_key":"lambda:aws","expressions":{"batch_size":{"references":["each.value"]},"bisect_batch_on_function_error":{"references":["each.value"]},"enabled":{"references":["each.value"]},"event_source_arn":{"references":["each.value.event_source_arn","each.value"]},"function_name":{"references":["aws_lambda_function.this[0].arn","aws_lambda_function.this[0]","aws_lambda_function.this"]},"maximum_batching_window_in_seconds":{"references":["each.value"]},"maximum_record_age_in_seconds":{"references":["each.value"]},"maximum_retry_attempts":{"references":["each.value"]},"parallelization_factor":{"references":["each.value"]},"starting_position":{"references":["each.value"]},"starting_position_timestamp":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_function","var.create_layer","var.create_unqualified_alias_allowed_triggers","var.event_source_mapping"]}},{"address":"aws_lambda_function.this","mode":"managed","type":"aws_lambda_function","name":"this","provider_config_key":"lambda:aws","expressions":{"description":{"references":["var.description"]},"filename":{"references":["local.filename"]},"function_name":{"references":["var.function_name"]},"handler":{"references":["var.package_type","var.handler"]},"image_uri":{"references":["var.image_uri"]},"kms_key_arn":{"references":["var.kms_key_arn"]},"layers":{"references":["var.layers"]},"memory_size":{"references":["var.memory_size"]},"package_type":{"references":["var.package_type"]},"publish":{"references":["var.lambda_at_edge","var.publish"]},"reserved_concurrent_executions":{"references":["var.reserved_concurrent_executions"]},"role":{"references":["var.create_role","aws_iam_role.lambda[0].arn","aws_iam_role.lambda[0]","aws_iam_role.lambda","var.lambda_role"]},"runtime":{"references":["var.package_type","var.runtime"]},"s3_bucket":{"references":["local.s3_bucket"]},"s3_key":{"references":["local.s3_key"]},"s3_object_version":{"references":["local.s3_object_version"]},"source_code_hash":{"references":["local.filename","local.filename","local.was_missing","local.filename"]},"tags":{"references":["var.tags"]},"timeout":{"references":["var.lambda_at_edge","var.timeout","var.timeout"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_function","var.create_layer"]},"depends_on":["null_resource.archive","aws_s3_bucket_object.lambda_package"]},{"address":"aws_lambda_function_event_invoke_config.this","mode":"managed","type":"aws_lambda_function_event_invoke_config","name":"this","provider_config_key":"lambda:aws","expressions":{"function_name":{"references":["aws_lambda_function.this[0].function_name","aws_lambda_function.this[0]","aws_lambda_function.this"]},"maximum_event_age_in_seconds":{"references":["var.maximum_event_age_in_seconds"]},"maximum_retry_attempts":{"references":["var.maximum_retry_attempts"]},"qualifier":{"references":["each.key","aws_lambda_function.this[0].version","aws_lambda_function.this[0]","aws_lambda_function.this"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_function","var.create_layer","var.create_async_event_config","local.qualifiers"]}},{"address":"aws_lambda_layer_version.this","mode":"managed","type":"aws_lambda_layer_version","name":"this","provider_config_key":"lambda:aws","expressions":{"compatible_runtimes":{"references":["var.compatible_runtimes","var.compatible_runtimes","var.runtime"]},"description":{"references":["var.description"]},"filename":{"references":["local.filename"]},"layer_name":{"references":["var.layer_name"]},"license_info":{"references":["var.license_info"]},"s3_bucket":{"references":["local.s3_bucket"]},"s3_key":{"references":["local.s3_key"]},"s3_object_version":{"references":["local.s3_object_version"]},"source_code_hash":{"references":["local.filename","local.filename","local.was_missing","local.filename"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_layer"]},"depends_on":["null_resource.archive","aws_s3_bucket_object.lambda_package"]},{"address":"aws_lambda_permission.current_version_triggers","mode":"managed","type":"aws_lambda_permission","name":"current_version_triggers","provider_config_key":"lambda:aws","expressions":{"action":{"references":["each.value"]},"event_source_token":{"references":["each.value"]},"function_name":{"references":["aws_lambda_function.this[0].function_name","aws_lambda_function.this[0]","aws_lambda_function.this"]},"principal":{"references":["each.value","each.value"]},"qualifier":{"references":["aws_lambda_function.this[0].version","aws_lambda_function.this[0]","aws_lambda_function.this"]},"source_account":{"references":["each.value"]},"source_arn":{"references":["each.value"]},"statement_id":{"references":["each.value","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_function","var.create_layer","var.create_current_version_allowed_triggers","var.allowed_triggers"]}},{"address":"aws_lambda_permission.unqualified_alias_triggers","mode":"managed","type":"aws_lambda_permission","name":"unqualified_alias_triggers","provider_config_key":"lambda:aws","expressions":{"action":{"references":["each.value"]},"event_source_token":{"references":["each.value"]},"function_name":{"references":["aws_lambda_function.this[0].function_name","aws_lambda_function.this[0]","aws_lambda_function.this"]},"principal":{"references":["each.value","each.value"]},"source_account":{"references":["each.value"]},"source_arn":{"references":["each.value"]},"statement_id":{"references":["each.value","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.create_function","var.create_layer","var.create_unqualified_alias_allowed_triggers","var.allowed_triggers"]}},{"address":"aws_lambda_provisioned_concurrency_config.current_version","mode":"managed","type":"aws_lambda_provisioned_concurrency_config","name":"current_version","provider_config_key":"lambda:aws","expressions":{"function_name":{"references":["aws_lambda_function.this[0].function_name","aws_lambda_function.this[0]","aws_lambda_function.this"]},"provisioned_concurrent_executions":{"references":["var.provisioned_concurrent_executions"]},"qualifier":{"references":["aws_lambda_function.this[0].version","aws_lambda_function.this[0]","aws_lambda_function.this"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_function","var.create_layer","var.provisioned_concurrent_executions"]}},{"address":"aws_s3_bucket_object.lambda_package","mode":"managed","type":"aws_s3_bucket_object","name":"lambda_package","provider_config_key":"lambda:aws","expressions":{"acl":{"references":["var.s3_acl"]},"bucket":{"references":["var.s3_bucket"]},"etag":{"references":["data.external.archive_prepare[0].result.filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare","data.external.archive_prepare[0].result.filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]},"key":{"references":["data.external.archive_prepare[0].result.filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]},"server_side_encryption":{"references":["var.s3_server_side_encryption"]},"source":{"references":["data.external.archive_prepare[0].result.filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]},"storage_class":{"references":["var.s3_object_storage_class"]},"tags":{"references":["var.tags","var.s3_object_tags"]}},"schema_version":0,"count_expression":{"references":["var.create","var.store_on_s3","var.create_package"]},"depends_on":["null_resource.archive"]},{"address":"local_file.archive_plan","mode":"managed","type":"local_file","name":"archive_plan","provider_config_key":"lambda:local","expressions":{"content":{"references":["data.external.archive_prepare[0].result.build_plan","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]},"directory_permission":{"constant_value":"0755"},"file_permission":{"constant_value":"0644"},"filename":{"references":["data.external.archive_prepare[0].result.build_plan_filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_package"]}},{"address":"null_resource.archive","mode":"managed","type":"null_resource","name":"archive","provider_config_key":"lambda:null","provisioners":[{"type":"local-exec","expressions":{"command":{"references":["data.external.archive_prepare[0].result.build_plan_filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]},"interpreter":{"references":["local.python","path.module","data.external.archive_prepare[0].result.timestamp","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]}}}],"expressions":{"triggers":{"references":["data.external.archive_prepare[0].result.filename","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare","data.external.archive_prepare[0].result.timestamp","data.external.archive_prepare[0].result","data.external.archive_prepare[0]","data.external.archive_prepare"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_package"]},"depends_on":["local_file.archive_plan"]},{"address":"data.aws_arn.log_group_arn","mode":"data","type":"aws_arn","name":"log_group_arn","provider_config_key":"lambda:aws","expressions":{"arn":{"references":["local.log_group_arn_regional"]}},"schema_version":0,"count_expression":{"references":["local.create_role","var.lambda_at_edge"]}},{"address":"data.aws_cloudwatch_log_group.lambda","mode":"data","type":"aws_cloudwatch_log_group","name":"lambda","provider_config_key":"lambda:aws","expressions":{"name":{"references":["var.lambda_at_edge","var.function_name"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_function","var.create_layer","var.use_existing_cloudwatch_log_group"]}},{"address":"data.aws_iam_policy.tracing","mode":"data","type":"aws_iam_policy","name":"tracing","provider_config_key":"lambda:aws","expressions":{"arn":{"constant_value":"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_tracing_policy"]}},{"address":"data.aws_iam_policy.vpc","mode":"data","type":"aws_iam_policy","name":"vpc","provider_config_key":"lambda:aws","expressions":{"arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaENIManagementAccess"}},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_network_policy"]}},{"address":"data.aws_iam_policy_document.additional_inline","mode":"data","type":"aws_iam_policy_document","name":"additional_inline","provider_config_key":"lambda:aws","schema_version":0,"count_expression":{"references":["local.create_role","var.attach_policy_statements"]}},{"address":"data.aws_iam_policy_document.assume_role","mode":"data","type":"aws_iam_policy_document","name":"assume_role","provider_config_key":"lambda:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["local.trusted_entities_services"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["local.create_role"]}},{"address":"data.aws_iam_policy_document.async","mode":"data","type":"aws_iam_policy_document","name":"async","provider_config_key":"lambda:aws","expressions":{"statement":[{"actions":{"constant_value":["sns:Publish","sqs:SendMessage","events:PutEvents","lambda:InvokeFunction"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.destination_on_failure","var.destination_on_success"]}}]},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_async_event_policy"]}},{"address":"data.aws_iam_policy_document.dead_letter","mode":"data","type":"aws_iam_policy_document","name":"dead_letter","provider_config_key":"lambda:aws","expressions":{"statement":[{"actions":{"constant_value":["sns:Publish","sqs:SendMessage"]},"effect":{"constant_value":"Allow"},"resources":{"references":["var.dead_letter_target_arn"]}}]},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_dead_letter_policy"]}},{"address":"data.aws_iam_policy_document.logs","mode":"data","type":"aws_iam_policy_document","name":"logs","provider_config_key":"lambda:aws","expressions":{"statement":[{"actions":{"references":["var.use_existing_cloudwatch_log_group"]},"effect":{"constant_value":"Allow"},"resources":{"references":["local.log_group_arn"]}}]},"schema_version":0,"count_expression":{"references":["local.create_role","var.attach_cloudwatch_logs_policy"]}},{"address":"data.external.archive_prepare","mode":"data","type":"external","name":"archive_prepare","provider_config_key":"lambda:external","expressions":{"program":{"references":["local.python","path.module"]},"query":{"references":["path.module","path.root","path.cwd","var.build_in_docker","var.docker_pip_cache","var.docker_build_root","var.docker_file","var.docker_image","var.docker_with_ssh_agent","var.artifacts_dir","var.runtime","var.source_path","var.hash_extra"]}},"schema_version":0,"count_expression":{"references":["var.create","var.create_package"]}}],"variables":{"allowed_triggers":{"default":{},"description":"Map of allowed triggers to create Lambda permissions"},"artifacts_dir":{"default":"builds","description":"Directory name where artifacts should be stored"},"attach_async_event_policy":{"default":false,"description":"Controls whether async event policy should be added to IAM role for Lambda Function"},"attach_cloudwatch_logs_policy":{"default":true,"description":"Controls whether CloudWatch Logs policy should be added to IAM role for Lambda Function"},"attach_dead_letter_policy":{"default":false,"description":"Controls whether SNS/SQS dead letter notification policy should be added to IAM role for Lambda Function"},"attach_network_policy":{"default":false,"description":"Controls whether VPC/network policy should be added to IAM role for Lambda Function"},"attach_policies":{"default":false,"description":"Controls whether list of policies should be added to IAM role for Lambda Function"},"attach_policy":{"default":false,"description":"Controls whether policy should be added to IAM role for Lambda Function"},"attach_policy_json":{"default":false,"description":"Controls whether policy_json should be added to IAM role for Lambda Function"},"attach_policy_jsons":{"default":false,"description":"Controls whether policy_jsons should be added to IAM role for Lambda Function"},"attach_policy_statements":{"default":false,"description":"Controls whether policy_statements should be added to IAM role for Lambda Function"},"attach_tracing_policy":{"default":false,"description":"Controls whether X-Ray tracing policy should be added to IAM role for Lambda Function"},"build_in_docker":{"default":false,"description":"Whether to build dependencies in Docker"},"cloudwatch_logs_kms_key_id":{"default":null,"description":"The ARN of the KMS Key to use when encrypting log data."},"cloudwatch_logs_retention_in_days":{"default":null,"description":"Specifies the number of days you want to retain log events in the specified log group. Possible values are: 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365, 400, 545, 731, 1827, and 3653."},"cloudwatch_logs_tags":{"default":{},"description":"A map of tags to assign to the resource."},"compatible_runtimes":{"default":[],"description":"A list of Runtimes this layer is compatible with. Up to 5 runtimes can be specified."},"create":{"default":true,"description":"Controls whether resources should be created"},"create_async_event_config":{"default":false,"description":"Controls whether async event configuration for Lambda Function/Alias should be created"},"create_current_version_allowed_triggers":{"default":true,"description":"Whether to allow triggers on current version of Lambda Function (this will revoke permissions from previous version because Terraform manages only current resources)"},"create_current_version_async_event_config":{"default":true,"description":"Whether to allow async event configuration on current version of Lambda Function (this will revoke permissions from previous version because Terraform manages only current resources)"},"create_function":{"default":true,"description":"Controls whether Lambda Function resource should be created"},"create_layer":{"default":false,"description":"Controls whether Lambda Layer resource should be created"},"create_package":{"default":true,"description":"Controls whether Lambda package should be created"},"create_role":{"default":true,"description":"Controls whether IAM role for Lambda Function should be created"},"create_unqualified_alias_allowed_triggers":{"default":true,"description":"Whether to allow triggers on unqualified alias pointing to $LATEST version"},"create_unqualified_alias_async_event_config":{"default":true,"description":"Whether to allow async event configuration on unqualified alias pointing to $LATEST version"},"dead_letter_target_arn":{"default":null,"description":"The ARN of an SNS topic or SQS queue to notify when an invocation fails."},"description":{"default":"","description":"Description of your Lambda Function (or Layer)"},"destination_on_failure":{"default":null,"description":"Amazon Resource Name (ARN) of the destination resource for failed asynchronous invocations"},"destination_on_success":{"default":null,"description":"Amazon Resource Name (ARN) of the destination resource for successful asynchronous invocations"},"docker_build_root":{"default":"","description":"Root dir where to build in Docker"},"docker_file":{"default":"","description":"Path to a Dockerfile when building in Docker"},"docker_image":{"default":"","description":"Docker image to use for the build"},"docker_pip_cache":{"default":null,"description":"Whether to mount a shared pip cache folder into docker environment or not"},"docker_with_ssh_agent":{"default":false,"description":"Whether to pass SSH_AUTH_SOCK into docker environment or not"},"environment_variables":{"default":{},"description":"A map that defines environment variables for the Lambda Function."},"event_source_mapping":{"default":{},"description":"Map of event source mapping"},"file_system_arn":{"default":null,"description":"The Amazon Resource Name (ARN) of the Amazon EFS Access Point that provides access to the file system."},"file_system_local_mount_path":{"default":null,"description":"The path where the function can access the file system, starting with /mnt/."},"function_name":{"default":"","description":"A unique name for your Lambda Function"},"handler":{"default":"","description":"Lambda Function entrypoint in your code"},"hash_extra":{"default":"","description":"The string to add into hashing function. Useful when building same source path for different functions."},"image_config_command":{"default":[],"description":"The CMD for the docker image"},"image_config_entry_point":{"default":[],"description":"The ENTRYPOINT for the docker image"},"image_config_working_directory":{"default":null,"description":"The working directory for the docker image"},"image_uri":{"default":null,"description":"The ECR image URI containing the function's deployment package."},"kms_key_arn":{"default":null,"description":"The ARN of KMS key to use by your Lambda Function"},"lambda_at_edge":{"default":false,"description":"Set this to true if using Lambda@Edge, to enable publishing, limit the timeout, and allow edgelambda.amazonaws.com to invoke the function"},"lambda_role":{"default":"","description":" IAM role ARN attached to the Lambda Function. This governs both who / what can invoke your Lambda Function, as well as what resources our Lambda Function has access to. See Lambda Permission Model for more details."},"layer_name":{"default":"","description":"Name of Lambda Layer to create"},"layers":{"default":null,"description":"List of Lambda Layer Version ARNs (maximum of 5) to attach to your Lambda Function."},"license_info":{"default":"","description":"License info for your Lambda Layer. Eg, MIT or full url of a license."},"local_existing_package":{"default":null,"description":"The absolute path to an existing zip-file to use"},"maximum_event_age_in_seconds":{"default":null,"description":"Maximum age of a request that Lambda sends to a function for processing in seconds. Valid values between 60 and 21600."},"maximum_retry_attempts":{"default":null,"description":"Maximum number of times to retry when the function returns an error. Valid values between 0 and 2. Defaults to 2."},"memory_size":{"default":128,"description":"Amount of memory in MB your Lambda Function can use at runtime. Valid value between 128 MB to 10,240 MB (10 GB), in 64 MB increments."},"number_of_policies":{"default":0,"description":"Number of policies to attach to IAM role for Lambda Function"},"number_of_policy_jsons":{"default":0,"description":"Number of policies JSON to attach to IAM role for Lambda Function"},"package_type":{"default":"Zip","description":"The Lambda deployment package type. Valid options: Zip or Image"},"policies":{"default":[],"description":"List of policy statements ARN to attach to Lambda Function role"},"policy":{"default":null,"description":"An additional policy document ARN to attach to the Lambda Function role"},"policy_json":{"default":null,"description":"An additional policy document as JSON to attach to the Lambda Function role"},"policy_jsons":{"default":[],"description":"List of additional policy documents as JSON to attach to Lambda Function role"},"policy_statements":{"default":{},"description":"Map of dynamic policy statements to attach to Lambda Function role"},"provisioned_concurrent_executions":{"default":-1,"description":"Amount of capacity to allocate. Set to 1 or greater to enable, or set to 0 to disable provisioned concurrency."},"publish":{"default":false,"description":"Whether to publish creation/change as new Lambda Function Version."},"reserved_concurrent_executions":{"default":-1,"description":"The amount of reserved concurrent executions for this Lambda Function. A value of 0 disables Lambda Function from being triggered and -1 removes any concurrency limitations. Defaults to Unreserved Concurrency Limits -1."},"role_description":{"default":null,"description":"Description of IAM role to use for Lambda Function"},"role_force_detach_policies":{"default":true,"description":"Specifies to force detaching any policies the IAM role has before destroying it."},"role_name":{"default":null,"description":"Name of IAM role to use for Lambda Function"},"role_path":{"default":null,"description":"Path of IAM role to use for Lambda Function"},"role_permissions_boundary":{"default":null,"description":"The ARN of the policy that is used to set the permissions boundary for the IAM role used by Lambda Function"},"role_tags":{"default":{},"description":"A map of tags to assign to IAM role"},"runtime":{"default":"","description":"Lambda Function runtime"},"s3_acl":{"default":"private","description":"The canned ACL to apply. Valid values are private, public-read, public-read-write, aws-exec-read, authenticated-read, bucket-owner-read, and bucket-owner-full-control. Defaults to private."},"s3_bucket":{"default":null,"description":"S3 bucket to store artifacts"},"s3_existing_package":{"default":null,"description":"The S3 bucket object with keys bucket, key, version pointing to an existing zip-file to use"},"s3_object_storage_class":{"default":"ONEZONE_IA","description":"Specifies the desired Storage Class for the artifact uploaded to S3. Can be either STANDARD, REDUCED_REDUNDANCY, ONEZONE_IA, INTELLIGENT_TIERING, or STANDARD_IA."},"s3_object_tags":{"default":{},"description":"A map of tags to assign to S3 bucket object."},"s3_server_side_encryption":{"default":null,"description":"Specifies server-side encryption of the object in S3. Valid values are \"AES256\" and \"aws:kms\"."},"source_path":{"default":null,"description":"The absolute path to a local file or directory containing your Lambda source code"},"store_on_s3":{"default":false,"description":"Whether to store produced artifacts on S3 or locally."},"tags":{"default":{},"description":"A map of tags to assign to resources."},"timeout":{"default":3,"description":"The amount of time your Lambda Function has to run in seconds."},"tracing_mode":{"default":null,"description":"Tracing mode of the Lambda Function. Valid value can be either PassThrough or Active."},"trusted_entities":{"default":[],"description":"List of additional trusted entities for assuming Lambda Function role (trust relationship)"},"use_existing_cloudwatch_log_group":{"default":false,"description":"Whether to use an existing CloudWatch log group or create new"},"vpc_security_group_ids":{"default":null,"description":"List of security group ids when Lambda Function should run in the VPC."},"vpc_subnet_ids":{"default":null,"description":"List of subnet ids when Lambda Function should run in the VPC. Usually private or intra subnets."}}},"version_constraint":"1.47.0","depends_on":["aws_cloudwatch_log_group.lambda"]}},"variables":{"cloudwatch_log_group_kms_key_id":{"default":null,"description":"The ARN of the KMS Key to use when encrypting log data for Lambda"},"cloudwatch_log_group_retention_in_days":{"default":0,"description":"Specifies the number of days you want to retain log events in log group for Lambda."},"cloudwatch_log_group_tags":{"default":{},"description":"Additional tags for the Cloudwatch log group"},"create":{"default":true,"description":"Whether to create all resources"},"create_sns_topic":{"default":true,"description":"Whether to create new SNS topic"},"iam_role_boundary_policy_arn":{"default":null,"description":"The ARN of the policy that is used to set the permissions boundary for the role"},"iam_role_name_prefix":{"default":"lambda","description":"A unique role name beginning with the specified prefix"},"iam_role_tags":{"default":{},"description":"Additional tags for the IAM role"},"kms_key_arn":{"default":"","description":"ARN of the KMS key used for decrypting slack webhook url"},"lambda_description":{"default":null,"description":"The description of the Lambda function"},"lambda_function_name":{"default":"notify_slack","description":"The name of the Lambda function to create"},"lambda_function_s3_bucket":{"default":null,"description":"S3 bucket to store artifacts"},"lambda_function_store_on_s3":{"default":false,"description":"Whether to store produced artifacts on S3 or locally."},"lambda_function_tags":{"default":{},"description":"Additional tags for the Lambda function"},"lambda_function_vpc_security_group_ids":{"default":null,"description":"List of security group ids when Lambda Function should run in the VPC."},"lambda_function_vpc_subnet_ids":{"default":null,"description":"List of subnet ids when Lambda Function should run in the VPC. Usually private or intra subnets."},"lambda_role":{"default":"","description":"IAM role attached to the Lambda Function.  If this is set then a role will not be created for you."},"log_events":{"default":false,"description":"Boolean flag to enabled/disable logging of incoming events"},"reserved_concurrent_executions":{"default":-1,"description":"The amount of reserved concurrent executions for this lambda function. A value of 0 disables lambda from being triggered and -1 removes any concurrency limitations"},"slack_channel":{"description":"The name of the channel in Slack for notifications"},"slack_emoji":{"default":":aws:","description":"A custom emoji that will appear on Slack messages"},"slack_username":{"description":"The username that will appear on Slack messages"},"slack_webhook_url":{"description":"The URL of Slack webhook"},"sns_topic_kms_key_id":{"default":"","description":"ARN of the KMS key used for enabling SSE on the topic"},"sns_topic_name":{"description":"The name of the SNS topic to create"},"sns_topic_tags":{"default":{},"description":"Additional tags for the SNS topic"},"subscription_filter_policy":{"default":null,"description":"(Optional) A valid filter policy that will be used in the subscription to filter messages seen by the target resource."},"tags":{"default":{},"description":"A map of tags to add to all resources"}}},"version_constraint":"4.17.0"},"vpc":{"source":"terraform-aws-modules/vpc/aws","expressions":{"azs":{"references":["local.aws_vars.vpc.az","local.aws_vars.vpc","local.aws_vars"]},"cidr":{"references":["local.aws_vars.vpc.cidr","local.aws_vars.vpc","local.aws_vars"]},"enable_nat_gateway":{"constant_value":true},"name":{"references":["local.name_prefix"]},"private_subnets":{"references":["local.aws_vars.vpc.private_subnet","local.aws_vars.vpc","local.aws_vars"]},"public_subnets":{"references":["local.aws_vars.vpc.public_subnet","local.aws_vars.vpc","local.aws_vars"]},"tags":{"references":["local.default_tags"]}},"module":{"outputs":{"azs":{"expression":{"references":["var.azs"]},"description":"A list of availability zones specified as argument to this module"},"cgw_arns":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of ARNs of Customer Gateway"},"cgw_ids":{"expression":{"references":["aws_customer_gateway.this"]},"description":"List of IDs of Customer Gateway"},"database_internet_gateway_route_id":{"expression":{"references":["aws_route.database_internet_gateway"]},"description":"ID of the database internet gateway route."},"database_ipv6_egress_route_id":{"expression":{"references":["aws_route.database_ipv6_egress"]},"description":"ID of the database IPv6 egress route."},"database_nat_gateway_route_ids":{"expression":{"references":["aws_route.database_nat_gateway"]},"description":"List of IDs of the database nat gateway route."},"database_network_acl_arn":{"expression":{"references":["aws_network_acl.database"]},"description":"ARN of the database network ACL"},"database_network_acl_id":{"expression":{"references":["aws_network_acl.database"]},"description":"ID of the database network ACL"},"database_route_table_association_ids":{"expression":{"references":["aws_route_table_association.database"]},"description":"List of IDs of the database route table association"},"database_route_table_ids":{"expression":{"references":["aws_route_table.database","aws_route_table.database","aws_route_table.private"]},"description":"List of IDs of database route tables"},"database_subnet_arns":{"expression":{"references":["aws_subnet.database"]},"description":"List of ARNs of database subnets"},"database_subnet_group":{"expression":{"references":["aws_db_subnet_group.database"]},"description":"ID of database subnet group"},"database_subnet_group_name":{"expression":{"references":["aws_db_subnet_group.database"]},"description":"Name of database subnet group"},"database_subnets":{"expression":{"references":["aws_subnet.database"]},"description":"List of IDs of database subnets"},"database_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of cidr_blocks of database subnets"},"database_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.database"]},"description":"List of IPv6 cidr_blocks of database subnets in an IPv6 enabled VPC"},"default_network_acl_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the default network ACL"},"default_route_table_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the default route table"},"default_security_group_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the security group created by default on VPC creation"},"default_vpc_arn":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ARN of the Default VPC"},"default_vpc_cidr_block":{"expression":{"references":["aws_default_vpc.this"]},"description":"The CIDR block of the Default VPC"},"default_vpc_default_network_acl_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the default network ACL of the Default VPC"},"default_vpc_default_route_table_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the default route table of the Default VPC"},"default_vpc_default_security_group_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the security group created by default on Default VPC creation"},"default_vpc_enable_dns_hostnames":{"expression":{"references":["aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS hostname support"},"default_vpc_enable_dns_support":{"expression":{"references":["aws_default_vpc.this"]},"description":"Whether or not the Default VPC has DNS support"},"default_vpc_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the Default VPC"},"default_vpc_instance_tenancy":{"expression":{"references":["aws_default_vpc.this"]},"description":"Tenancy of instances spin up within Default VPC"},"default_vpc_main_route_table_id":{"expression":{"references":["aws_default_vpc.this"]},"description":"The ID of the main route table associated with the Default VPC"},"dhcp_options_id":{"expression":{"references":["aws_vpc_dhcp_options.this"]},"description":"The ID of the DHCP options"},"egress_only_internet_gateway_id":{"expression":{"references":["aws_egress_only_internet_gateway.this"]},"description":"The ID of the egress only Internet Gateway"},"elasticache_network_acl_arn":{"expression":{"references":["aws_network_acl.elasticache"]},"description":"ARN of the elasticache network ACL"},"elasticache_network_acl_id":{"expression":{"references":["aws_network_acl.elasticache"]},"description":"ID of the elasticache network ACL"},"elasticache_route_table_association_ids":{"expression":{"references":["aws_route_table_association.elasticache"]},"description":"List of IDs of the elasticache route table association"},"elasticache_route_table_ids":{"expression":{"references":["aws_route_table.elasticache","aws_route_table.elasticache","aws_route_table.private"]},"description":"List of IDs of elasticache route tables"},"elasticache_subnet_arns":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of ARNs of elasticache subnets"},"elasticache_subnet_group":{"expression":{"references":["aws_elasticache_subnet_group.elasticache"]},"description":"ID of elasticache subnet group"},"elasticache_subnet_group_name":{"expression":{"references":["aws_elasticache_subnet_group.elasticache"]},"description":"Name of elasticache subnet group"},"elasticache_subnets":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IDs of elasticache subnets"},"elasticache_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of cidr_blocks of elasticache subnets"},"elasticache_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.elasticache"]},"description":"List of IPv6 cidr_blocks of elasticache subnets in an IPv6 enabled VPC"},"igw_arn":{"expression":{"references":["aws_internet_gateway.this"]},"description":"The ARN of the Internet Gateway"},"igw_id":{"expression":{"references":["aws_internet_gateway.this"]},"description":"The ID of the Internet Gateway"},"intra_network_acl_arn":{"expression":{"references":["aws_network_acl.intra"]},"description":"ARN of the intra network ACL"},"intra_network_acl_id":{"expression":{"references":["aws_network_acl.intra"]},"description":"ID of the intra network ACL"},"intra_route_table_association_ids":{"expression":{"references":["aws_route_table_association.intra"]},"description":"List of IDs of the intra route table association"},"intra_route_table_ids":{"expression":{"references":["aws_route_table.intra"]},"description":"List of IDs of intra route tables"},"intra_subnet_arns":{"expression":{"references":["aws_subnet.intra"]},"description":"List of ARNs of intra subnets"},"intra_subnets":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IDs of intra subnets"},"intra_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of cidr_blocks of intra subnets"},"intra_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.intra"]},"description":"List of IPv6 cidr_blocks of intra subnets in an IPv6 enabled VPC"},"name":{"expression":{"references":["var.name"]},"description":"The name of the VPC specified as argument to this module"},"nat_ids":{"expression":{"references":["aws_eip.nat"]},"description":"List of allocation ID of Elastic IPs created for AWS NAT Gateway"},"nat_public_ips":{"expression":{"references":["var.reuse_nat_ips","var.external_nat_ips","aws_eip.nat"]},"description":"List of public Elastic IPs created for AWS NAT Gateway"},"natgw_ids":{"expression":{"references":["aws_nat_gateway.this"]},"description":"List of NAT Gateway IDs"},"outpost_network_acl_arn":{"expression":{"references":["aws_network_acl.outpost"]},"description":"ARN of the outpost network ACL"},"outpost_network_acl_id":{"expression":{"references":["aws_network_acl.outpost"]},"description":"ID of the outpost network ACL"},"outpost_subnet_arns":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of ARNs of outpost subnets"},"outpost_subnets":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IDs of outpost subnets"},"outpost_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of cidr_blocks of outpost subnets"},"outpost_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.outpost"]},"description":"List of IPv6 cidr_blocks of outpost subnets in an IPv6 enabled VPC"},"private_ipv6_egress_route_ids":{"expression":{"references":["aws_route.private_ipv6_egress"]},"description":"List of IDs of the ipv6 egress route."},"private_nat_gateway_route_ids":{"expression":{"references":["aws_route.private_nat_gateway"]},"description":"List of IDs of the private nat gateway route."},"private_network_acl_arn":{"expression":{"references":["aws_network_acl.private"]},"description":"ARN of the private network ACL"},"private_network_acl_id":{"expression":{"references":["aws_network_acl.private"]},"description":"ID of the private network ACL"},"private_route_table_association_ids":{"expression":{"references":["aws_route_table_association.private"]},"description":"List of IDs of the private route table association"},"private_route_table_ids":{"expression":{"references":["aws_route_table.private"]},"description":"List of IDs of private route tables"},"private_subnet_arns":{"expression":{"references":["aws_subnet.private"]},"description":"List of ARNs of private subnets"},"private_subnets":{"expression":{"references":["aws_subnet.private"]},"description":"List of IDs of private subnets"},"private_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of cidr_blocks of private subnets"},"private_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.private"]},"description":"List of IPv6 cidr_blocks of private subnets in an IPv6 enabled VPC"},"public_internet_gateway_ipv6_route_id":{"expression":{"references":["aws_route.public_internet_gateway_ipv6"]},"description":"ID of the IPv6 internet gateway route."},"public_internet_gateway_route_id":{"expression":{"references":["aws_route.public_internet_gateway"]},"description":"ID of the internet gateway route."},"public_network_acl_arn":{"expression":{"references":["aws_network_acl.public"]},"description":"ARN of the public network ACL"},"public_network_acl_id":{"expression":{"references":["aws_network_acl.public"]},"description":"ID of the public network ACL"},"public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.public"]},"description":"List of IDs of the public route table association"},"public_route_table_ids":{"expression":{"references":["aws_route_table.public"]},"description":"List of IDs of public route tables"},"public_subnet_arns":{"expression":{"references":["aws_subnet.public"]},"description":"List of ARNs of public subnets"},"public_subnets":{"expression":{"references":["aws_subnet.public"]},"description":"List of IDs of public subnets"},"public_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of cidr_blocks of public subnets"},"public_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.public"]},"description":"List of IPv6 cidr_blocks of public subnets in an IPv6 enabled VPC"},"redshift_network_acl_arn":{"expression":{"references":["aws_network_acl.redshift"]},"description":"ARN of the redshift network ACL"},"redshift_network_acl_id":{"expression":{"references":["aws_network_acl.redshift"]},"description":"ID of the redshift network ACL"},"redshift_public_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift_public"]},"description":"List of IDs of the public redshidt route table association"},"redshift_route_table_association_ids":{"expression":{"references":["aws_route_table_association.redshift"]},"description":"List of IDs of the redshift route table association"},"redshift_route_table_ids":{"expression":{"references":["aws_route_table.redshift","aws_route_table.redshift","var.enable_public_redshift","aws_route_table.public","aws_route_table.private"]},"description":"List of IDs of redshift route tables"},"redshift_subnet_arns":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of ARNs of redshift subnets"},"redshift_subnet_group":{"expression":{"references":["aws_redshift_subnet_group.redshift"]},"description":"ID of redshift subnet group"},"redshift_subnets":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IDs of redshift subnets"},"redshift_subnets_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of cidr_blocks of redshift subnets"},"redshift_subnets_ipv6_cidr_blocks":{"expression":{"references":["aws_subnet.redshift"]},"description":"List of IPv6 cidr_blocks of redshift subnets in an IPv6 enabled VPC"},"this_customer_gateway":{"expression":{"references":["aws_customer_gateway.this"]},"description":"Map of Customer Gateway attributes"},"vgw_arn":{"expression":{"references":["aws_vpn_gateway.this"]},"description":"The ARN of the VPN Gateway"},"vgw_id":{"expression":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this"]},"description":"The ID of the VPN Gateway"},"vpc_arn":{"expression":{"references":["aws_vpc.this"]},"description":"The ARN of the VPC"},"vpc_cidr_block":{"expression":{"references":["aws_vpc.this"]},"description":"The CIDR block of the VPC"},"vpc_enable_dns_hostnames":{"expression":{"references":["aws_vpc.this"]},"description":"Whether or not the VPC has DNS hostname support"},"vpc_enable_dns_support":{"expression":{"references":["aws_vpc.this"]},"description":"Whether or not the VPC has DNS support"},"vpc_flow_log_cloudwatch_iam_role_arn":{"expression":{"references":["local.flow_log_iam_role_arn"]},"description":"The ARN of the IAM role used when pushing logs to Cloudwatch log group"},"vpc_flow_log_destination_arn":{"expression":{"references":["local.flow_log_destination_arn"]},"description":"The ARN of the destination for VPC Flow Logs"},"vpc_flow_log_destination_type":{"expression":{"references":["var.flow_log_destination_type"]},"description":"The type of the destination for VPC Flow Logs"},"vpc_flow_log_id":{"expression":{"references":["aws_flow_log.this"]},"description":"The ID of the Flow Log resource"},"vpc_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the VPC"},"vpc_instance_tenancy":{"expression":{"references":["aws_vpc.this"]},"description":"Tenancy of instances spin up within VPC"},"vpc_ipv6_association_id":{"expression":{"references":["aws_vpc.this"]},"description":"The association ID for the IPv6 CIDR block"},"vpc_ipv6_cidr_block":{"expression":{"references":["aws_vpc.this"]},"description":"The IPv6 CIDR block"},"vpc_main_route_table_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the main route table associated with this VPC"},"vpc_owner_id":{"expression":{"references":["aws_vpc.this"]},"description":"The ID of the AWS account that owns the VPC"},"vpc_secondary_cidr_blocks":{"expression":{"references":["aws_vpc_ipv4_cidr_block_association.this"]},"description":"List of secondary CIDR blocks of the VPC"}},"resources":[{"address":"aws_cloudwatch_log_group.flow_log","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log","provider_config_key":"vpc:aws","expressions":{"kms_key_id":{"references":["var.flow_log_cloudwatch_log_group_kms_key_id"]},"name":{"references":["var.flow_log_cloudwatch_log_group_name_prefix","local.vpc_id"]},"retention_in_days":{"references":["var.flow_log_cloudwatch_log_group_retention_in_days"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_log_group"]}},{"address":"aws_customer_gateway.this","mode":"managed","type":"aws_customer_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"bgp_asn":{"references":["each.value[\"bgp_asn\"]","each.value"]},"device_name":{"references":["each.value"]},"ip_address":{"references":["each.value[\"ip_address\"]","each.value"]},"tags":{"references":["var.name","each.key","var.tags","var.customer_gateway_tags"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0,"for_each_expression":{"references":["var.customer_gateways"]}},{"address":"aws_db_subnet_group.database","mode":"managed","type":"aws_db_subnet_group","name":"database","provider_config_key":"vpc:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.database_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_group_name","var.name","var.tags","var.database_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.create_database_subnet_group"]}},{"address":"aws_default_network_acl.this","mode":"managed","type":"aws_default_network_acl","name":"this","provider_config_key":"vpc:aws","expressions":{"default_network_acl_id":{"references":["aws_vpc.this"]},"subnet_ids":{"references":["aws_subnet.public","aws_subnet.private","aws_subnet.intra","aws_subnet.database","aws_subnet.redshift","aws_subnet.elasticache","aws_subnet.outpost","aws_network_acl.public","aws_network_acl.private","aws_network_acl.intra","aws_network_acl.database","aws_network_acl.redshift","aws_network_acl.elasticache","aws_network_acl.outpost"]},"tags":{"references":["var.default_network_acl_name","var.tags","var.default_network_acl_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.manage_default_network_acl"]}},{"address":"aws_default_route_table.default","mode":"managed","type":"aws_default_route_table","name":"default","provider_config_key":"vpc:aws","expressions":{"default_route_table_id":{"references":["aws_vpc.this[0].default_route_table_id","aws_vpc.this[0]","aws_vpc.this"]},"propagating_vgws":{"references":["var.default_route_table_propagating_vgws"]},"tags":{"references":["var.name","var.tags","var.default_route_table_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.manage_default_route_table"]}},{"address":"aws_default_security_group.this","mode":"managed","type":"aws_default_security_group","name":"this","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.default_security_group_name","var.tags","var.default_security_group_tags"]},"vpc_id":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.manage_default_security_group"]}},{"address":"aws_default_vpc.this","mode":"managed","type":"aws_default_vpc","name":"this","provider_config_key":"vpc:aws","expressions":{"enable_classiclink":{"references":["var.default_vpc_enable_classiclink"]},"enable_dns_hostnames":{"references":["var.default_vpc_enable_dns_hostnames"]},"enable_dns_support":{"references":["var.default_vpc_enable_dns_support"]},"tags":{"references":["var.default_vpc_name","var.tags","var.default_vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.manage_default_vpc"]}},{"address":"aws_egress_only_internet_gateway.this","mode":"managed","type":"aws_egress_only_internet_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_egress_only_igw","var.enable_ipv6","local.max_subnet_length"]}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_eip_tags"]},"vpc":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","var.reuse_nat_ips","local.nat_gateway_count"]}},{"address":"aws_elasticache_subnet_group.elasticache","mode":"managed","type":"aws_elasticache_subnet_group","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.elasticache_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.elasticache_subnet_group_name","var.name","var.tags","var.elasticache_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.create_elasticache_subnet_group"]}},{"address":"aws_flow_log.this","mode":"managed","type":"aws_flow_log","name":"this","provider_config_key":"vpc:aws","expressions":{"iam_role_arn":{"references":["local.flow_log_iam_role_arn"]},"log_destination":{"references":["local.flow_log_destination_arn"]},"log_destination_type":{"references":["var.flow_log_destination_type"]},"log_format":{"references":["var.flow_log_log_format"]},"max_aggregation_interval":{"references":["var.flow_log_max_aggregation_interval"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]},"traffic_type":{"references":["var.flow_log_traffic_type"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.enable_flow_log"]}},{"address":"aws_iam_policy.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_policy","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"name_prefix":{"constant_value":"vpc-flow-log-to-cloudwatch-"},"policy":{"references":["data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0].json","data.aws_iam_policy_document.vpc_flow_log_cloudwatch[0]","data.aws_iam_policy_document.vpc_flow_log_cloudwatch"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_iam_role.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0].json","data.aws_iam_policy_document.flow_log_cloudwatch_assume_role[0]","data.aws_iam_policy_document.flow_log_cloudwatch_assume_role"]},"name_prefix":{"constant_value":"vpc-flow-log-role-"},"permissions_boundary":{"references":["var.vpc_flow_log_permissions_boundary"]},"tags":{"references":["var.tags","var.vpc_flow_log_tags"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_iam_role_policy_attachment.vpc_flow_log_cloudwatch","mode":"managed","type":"aws_iam_role_policy_attachment","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.vpc_flow_log_cloudwatch[0].arn","aws_iam_policy.vpc_flow_log_cloudwatch[0]","aws_iam_policy.vpc_flow_log_cloudwatch"]},"role":{"references":["aws_iam_role.vpc_flow_log_cloudwatch[0].name","aws_iam_role.vpc_flow_log_cloudwatch[0]","aws_iam_role.vpc_flow_log_cloudwatch"]}},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.tags","var.igw_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.public_subnets"]}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"allocation_id":{"references":["local.nat_gateway_ips","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["var.name","var.azs","var.single_nat_gateway","count.index","var.tags","var.nat_gateway_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.this"]},{"address":"aws_network_acl.database","mode":"managed","type":"aws_network_acl","name":"database","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.database"]},"tags":{"references":["var.database_subnet_suffix","var.name","var.tags","var.database_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets"]}},{"address":"aws_network_acl.elasticache","mode":"managed","type":"aws_network_acl","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.elasticache"]},"tags":{"references":["var.elasticache_subnet_suffix","var.name","var.tags","var.elasticache_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets"]}},{"address":"aws_network_acl.intra","mode":"managed","type":"aws_network_acl","name":"intra","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.intra"]},"tags":{"references":["var.intra_subnet_suffix","var.name","var.tags","var.intra_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets"]}},{"address":"aws_network_acl.outpost","mode":"managed","type":"aws_network_acl","name":"outpost","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.outpost"]},"tags":{"references":["var.outpost_subnet_suffix","var.name","var.tags","var.outpost_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets"]}},{"address":"aws_network_acl.private","mode":"managed","type":"aws_network_acl","name":"private","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["var.private_subnet_suffix","var.name","var.tags","var.private_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets"]}},{"address":"aws_network_acl.public","mode":"managed","type":"aws_network_acl","name":"public","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.public"]},"tags":{"references":["var.public_subnet_suffix","var.name","var.tags","var.public_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets"]}},{"address":"aws_network_acl.redshift","mode":"managed","type":"aws_network_acl","name":"redshift","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.redshift_subnet_suffix","var.name","var.tags","var.redshift_acl_tags"]},"vpc_id":{"references":["aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets"]}},{"address":"aws_network_acl_rule.database_inbound","mode":"managed","type":"aws_network_acl_rule","name":"database_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"protocol":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_inbound_acl_rules","count.index"]},"to_port":{"references":["var.database_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.database_outbound","mode":"managed","type":"aws_network_acl_rule","name":"database_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.database_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.database_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.database_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.database[0].id","aws_network_acl.database[0]","aws_network_acl.database"]},"protocol":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.database_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.database_outbound_acl_rules","count.index"]},"to_port":{"references":["var.database_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_dedicated_network_acl","var.database_subnets","var.database_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.elasticache_inbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"protocol":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_inbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.elasticache_outbound","mode":"managed","type":"aws_network_acl_rule","name":"elasticache_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.elasticache[0].id","aws_network_acl.elasticache[0]","aws_network_acl.elasticache"]},"protocol":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.elasticache_outbound_acl_rules","count.index"]},"to_port":{"references":["var.elasticache_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_dedicated_network_acl","var.elasticache_subnets","var.elasticache_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.intra_inbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"protocol":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_inbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.intra_outbound","mode":"managed","type":"aws_network_acl_rule","name":"intra_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.intra_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.intra_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.intra_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.intra[0].id","aws_network_acl.intra[0]","aws_network_acl.intra"]},"protocol":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.intra_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.intra_outbound_acl_rules","count.index"]},"to_port":{"references":["var.intra_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_dedicated_network_acl","var.intra_subnets","var.intra_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.outpost_inbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"protocol":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_inbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets","var.outpost_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.outpost_outbound","mode":"managed","type":"aws_network_acl_rule","name":"outpost_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.outpost_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.outpost_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.outpost_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.outpost[0].id","aws_network_acl.outpost[0]","aws_network_acl.outpost"]},"protocol":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.outpost_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.outpost_outbound_acl_rules","count.index"]},"to_port":{"references":["var.outpost_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_dedicated_network_acl","var.outpost_subnets","var.outpost_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.private_inbound","mode":"managed","type":"aws_network_acl_rule","name":"private_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"protocol":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_inbound_acl_rules","count.index"]},"to_port":{"references":["var.private_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.private_outbound","mode":"managed","type":"aws_network_acl_rule","name":"private_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.private_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.private_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.private_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.private[0].id","aws_network_acl.private[0]","aws_network_acl.private"]},"protocol":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.private_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.private_outbound_acl_rules","count.index"]},"to_port":{"references":["var.private_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_dedicated_network_acl","var.private_subnets","var.private_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.public_inbound","mode":"managed","type":"aws_network_acl_rule","name":"public_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"protocol":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_inbound_acl_rules","count.index"]},"to_port":{"references":["var.public_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.public_outbound","mode":"managed","type":"aws_network_acl_rule","name":"public_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.public_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.public_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.public_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.public[0].id","aws_network_acl.public[0]","aws_network_acl.public"]},"protocol":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.public_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.public_outbound_acl_rules","count.index"]},"to_port":{"references":["var.public_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_dedicated_network_acl","var.public_subnets","var.public_outbound_acl_rules"]}},{"address":"aws_network_acl_rule.redshift_inbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_inbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"egress":{"constant_value":false},"from_port":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_inbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_inbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_inbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"protocol":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_inbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_inbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_inbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_inbound_acl_rules"]}},{"address":"aws_network_acl_rule.redshift_outbound","mode":"managed","type":"aws_network_acl_rule","name":"redshift_outbound","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"egress":{"constant_value":true},"from_port":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_code":{"references":["var.redshift_outbound_acl_rules","count.index"]},"icmp_type":{"references":["var.redshift_outbound_acl_rules","count.index"]},"ipv6_cidr_block":{"references":["var.redshift_outbound_acl_rules","count.index"]},"network_acl_id":{"references":["aws_network_acl.redshift[0].id","aws_network_acl.redshift[0]","aws_network_acl.redshift"]},"protocol":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_action":{"references":["var.redshift_outbound_acl_rules","count.index"]},"rule_number":{"references":["var.redshift_outbound_acl_rules","count.index"]},"to_port":{"references":["var.redshift_outbound_acl_rules","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_dedicated_network_acl","var.redshift_subnets","var.redshift_outbound_acl_rules"]}},{"address":"aws_redshift_subnet_group.redshift","mode":"managed","type":"aws_redshift_subnet_group","name":"redshift","provider_config_key":"vpc:aws","expressions":{"description":{"references":["var.name"]},"name":{"references":["var.redshift_subnet_group_name","var.name"]},"subnet_ids":{"references":["aws_subnet.redshift"]},"tags":{"references":["var.redshift_subnet_group_name","var.name","var.tags","var.redshift_subnet_group_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.create_redshift_subnet_group"]}},{"address":"aws_route.database_internet_gateway","mode":"managed","type":"aws_route","name":"database_internet_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.database[0].id","aws_route_table.database[0]","aws_route_table.database"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route"]}},{"address":"aws_route.database_ipv6_egress","mode":"managed","type":"aws_route","name":"database_ipv6_egress","provider_config_key":"vpc:aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this[0].id","aws_egress_only_internet_gateway.this[0]","aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.database[0].id","aws_route_table.database[0]","aws_route_table.database"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_egress_only_igw","var.enable_ipv6","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route"]}},{"address":"aws_route.database_nat_gateway","mode":"managed","type":"aws_route","name":"database_nat_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.database","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.create_database_internet_gateway_route","var.create_database_nat_gateway_route","var.enable_nat_gateway","var.single_nat_gateway","var.database_subnets"]}},{"address":"aws_route.private_ipv6_egress","mode":"managed","type":"aws_route","name":"private_ipv6_egress","provider_config_key":"vpc:aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"egress_only_gateway_id":{"references":["aws_egress_only_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_egress_only_igw","var.enable_ipv6","var.private_subnets"]}},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_nat_gateway","local.nat_gateway_count"]}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.public_subnets"]}},{"address":"aws_route.public_internet_gateway_ipv6","mode":"managed","type":"aws_route","name":"public_internet_gateway_ipv6","provider_config_key":"vpc:aws","expressions":{"destination_ipv6_cidr_block":{"constant_value":"::/0"},"gateway_id":{"references":["aws_internet_gateway.this[0].id","aws_internet_gateway.this[0]","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_igw","var.enable_ipv6","var.public_subnets"]}},{"address":"aws_route_table.database","mode":"managed","type":"aws_route_table","name":"database","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.create_database_internet_gateway_route","var.name","var.database_subnet_suffix","var.database_subnet_suffix","var.name","var.azs","count.index","var.tags","var.database_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_database_subnet_route_table","var.database_subnets","var.single_nat_gateway","var.create_database_internet_gateway_route","var.database_subnets"]}},{"address":"aws_route_table.elasticache","mode":"managed","type":"aws_route_table","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.elasticache_subnet_suffix","var.tags","var.elasticache_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_elasticache_subnet_route_table","var.elasticache_subnets"]}},{"address":"aws_route_table.intra","mode":"managed","type":"aws_route_table","name":"intra","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.intra_subnet_suffix","var.tags","var.intra_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_subnets"]}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.single_nat_gateway","var.name","var.private_subnet_suffix","var.private_subnet_suffix","var.name","var.azs","count.index","var.tags","var.private_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","local.max_subnet_length","local.nat_gateway_count"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.public_subnet_suffix","var.name","var.tags","var.public_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets"]}},{"address":"aws_route_table.redshift","mode":"managed","type":"aws_route_table","name":"redshift","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["var.name","var.redshift_subnet_suffix","var.tags","var.redshift_route_table_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.create_redshift_subnet_route_table","var.redshift_subnets"]}},{"address":"aws_route_table_association.database","mode":"managed","type":"aws_route_table_association","name":"database","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.database","aws_route_table.private","var.create_database_subnet_route_table","var.single_nat_gateway","var.create_database_internet_gateway_route","count.index","count.index"]},"subnet_id":{"references":["aws_subnet.database","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.database_subnets"]}},{"address":"aws_route_table_association.elasticache","mode":"managed","type":"aws_route_table_association","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.elasticache","aws_route_table.private","var.single_nat_gateway","var.create_elasticache_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.elasticache","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]}},{"address":"aws_route_table_association.intra","mode":"managed","type":"aws_route_table_association","name":"intra","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra"]},"subnet_id":{"references":["aws_subnet.intra","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.intra_subnets","var.intra_subnets"]}},{"address":"aws_route_table_association.outpost","mode":"managed","type":"aws_route_table_association","name":"outpost","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.outpost","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.outpost_subnets","var.outpost_subnets"]}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.private_subnets","var.private_subnets"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.public_subnets","var.public_subnets"]}},{"address":"aws_route_table_association.redshift","mode":"managed","type":"aws_route_table_association","name":"redshift","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.private","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]}},{"address":"aws_route_table_association.redshift_public","mode":"managed","type":"aws_route_table_association","name":"redshift_public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.redshift","aws_route_table.public","var.single_nat_gateway","var.create_redshift_subnet_route_table","count.index"]},"subnet_id":{"references":["aws_subnet.redshift","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.enable_public_redshift","var.redshift_subnets"]}},{"address":"aws_subnet.database","mode":"managed","type":"aws_subnet","name":"database","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.database_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.database_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.database_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.database_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.database_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.database_subnet_suffix","var.name","var.azs","count.index","var.tags","var.database_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.database_subnets","var.database_subnets"]}},{"address":"aws_subnet.elasticache","mode":"managed","type":"aws_subnet","name":"elasticache","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.elasticache_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.elasticache_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.elasticache_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.elasticache_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.elasticache_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.elasticache_subnet_suffix","var.name","var.azs","count.index","var.tags","var.elasticache_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.elasticache_subnets","var.elasticache_subnets"]}},{"address":"aws_subnet.intra","mode":"managed","type":"aws_subnet","name":"intra","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.intra_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.intra_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.intra_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.intra_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.intra_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.intra_subnet_suffix","var.name","var.azs","count.index","var.tags","var.intra_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.intra_subnets","var.intra_subnets"]}},{"address":"aws_subnet.outpost","mode":"managed","type":"aws_subnet","name":"outpost","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.outpost_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.outpost_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.outpost_az"]},"cidr_block":{"references":["var.outpost_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.outpost_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.outpost_subnet_ipv6_prefixes","count.index"]},"outpost_arn":{"references":["var.outpost_arn"]},"tags":{"references":["var.outpost_subnet_suffix","var.name","var.outpost_az","var.tags","var.outpost_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.outpost_subnets","var.outpost_subnets"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.private_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.private_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.private_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.private_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.private_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.private_subnet_suffix","var.name","var.azs","count.index","var.tags","var.private_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.private_subnets","var.private_subnets"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.public_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.public_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.public_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.public_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.public_subnet_ipv6_prefixes","count.index"]},"map_public_ip_on_launch":{"references":["var.map_public_ip_on_launch"]},"tags":{"references":["var.public_subnet_suffix","var.name","var.azs","count.index","var.tags","var.public_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.public_subnets","var.one_nat_gateway_per_az","var.public_subnets","var.azs","var.public_subnets"]}},{"address":"aws_subnet.redshift","mode":"managed","type":"aws_subnet","name":"redshift","provider_config_key":"vpc:aws","expressions":{"assign_ipv6_address_on_creation":{"references":["var.redshift_subnet_assign_ipv6_address_on_creation","var.assign_ipv6_address_on_creation","var.redshift_subnet_assign_ipv6_address_on_creation"]},"availability_zone":{"references":["var.azs","count.index","var.azs","count.index"]},"availability_zone_id":{"references":["var.azs","count.index","var.azs","count.index"]},"cidr_block":{"references":["var.redshift_subnets","count.index"]},"ipv6_cidr_block":{"references":["var.enable_ipv6","var.redshift_subnet_ipv6_prefixes","aws_vpc.this[0].ipv6_cidr_block","aws_vpc.this[0]","aws_vpc.this","var.redshift_subnet_ipv6_prefixes","count.index"]},"tags":{"references":["var.redshift_subnet_suffix","var.name","var.azs","count.index","var.tags","var.redshift_subnet_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.redshift_subnets","var.redshift_subnets"]}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"vpc:aws","expressions":{"assign_generated_ipv6_cidr_block":{"references":["var.enable_ipv6"]},"cidr_block":{"references":["var.cidr"]},"enable_classiclink":{"references":["var.enable_classiclink"]},"enable_classiclink_dns_support":{"references":["var.enable_classiclink_dns_support"]},"enable_dns_hostnames":{"references":["var.enable_dns_hostnames"]},"enable_dns_support":{"references":["var.enable_dns_support"]},"instance_tenancy":{"references":["var.instance_tenancy"]},"tags":{"references":["var.name","var.tags","var.vpc_tags"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_vpc_dhcp_options.this","mode":"managed","type":"aws_vpc_dhcp_options","name":"this","provider_config_key":"vpc:aws","expressions":{"domain_name":{"references":["var.dhcp_options_domain_name"]},"domain_name_servers":{"references":["var.dhcp_options_domain_name_servers"]},"netbios_name_servers":{"references":["var.dhcp_options_netbios_name_servers"]},"netbios_node_type":{"references":["var.dhcp_options_netbios_node_type"]},"ntp_servers":{"references":["var.dhcp_options_ntp_servers"]},"tags":{"references":["var.name","var.tags","var.dhcp_options_tags"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dhcp_options"]}},{"address":"aws_vpc_dhcp_options_association.this","mode":"managed","type":"aws_vpc_dhcp_options_association","name":"this","provider_config_key":"vpc:aws","expressions":{"dhcp_options_id":{"references":["aws_vpc_dhcp_options.this[0].id","aws_vpc_dhcp_options.this[0]","aws_vpc_dhcp_options.this"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_dhcp_options"]}},{"address":"aws_vpc_ipv4_cidr_block_association.this","mode":"managed","type":"aws_vpc_ipv4_cidr_block_association","name":"this","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.secondary_cidr_blocks","count.index"]},"vpc_id":{"references":["aws_vpc.this[0].id","aws_vpc.this[0]","aws_vpc.this"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.secondary_cidr_blocks","var.secondary_cidr_blocks"]}},{"address":"aws_vpn_gateway.this","mode":"managed","type":"aws_vpn_gateway","name":"this","provider_config_key":"vpc:aws","expressions":{"amazon_side_asn":{"references":["var.amazon_side_asn"]},"availability_zone":{"references":["var.vpn_gateway_az"]},"tags":{"references":["var.name","var.tags","var.vpn_gateway_tags"]},"vpc_id":{"references":["local.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.enable_vpn_gateway"]}},{"address":"aws_vpn_gateway_attachment.this","mode":"managed","type":"aws_vpn_gateway_attachment","name":"this","provider_config_key":"vpc:aws","expressions":{"vpc_id":{"references":["local.vpc_id"]},"vpn_gateway_id":{"references":["var.vpn_gateway_id"]}},"schema_version":0,"count_expression":{"references":["var.vpn_gateway_id"]}},{"address":"aws_vpn_gateway_route_propagation.intra","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"intra","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.intra","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_intra_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.intra_subnets"]}},{"address":"aws_vpn_gateway_route_propagation.private","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"private","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_private_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id","var.private_subnets"]}},{"address":"aws_vpn_gateway_route_propagation.public","mode":"managed","type":"aws_vpn_gateway_route_propagation","name":"public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public","count.index"]},"vpn_gateway_id":{"references":["aws_vpn_gateway.this","aws_vpn_gateway_attachment.this","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.propagate_public_route_tables_vgw","var.enable_vpn_gateway","var.vpn_gateway_id"]}},{"address":"data.aws_iam_policy_document.flow_log_cloudwatch_assume_role","mode":"data","type":"aws_iam_policy_document","name":"flow_log_cloudwatch_assume_role","provider_config_key":"vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["vpc-flow-logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"AWSVPCFlowLogsAssumeRole"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}},{"address":"data.aws_iam_policy_document.vpc_flow_log_cloudwatch","mode":"data","type":"aws_iam_policy_document","name":"vpc_flow_log_cloudwatch","provider_config_key":"vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents","logs:DescribeLogGroups","logs:DescribeLogStreams"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"AWSVPCFlowLogsPushToCloudWatch"}}]},"schema_version":0,"count_expression":{"references":["local.create_flow_log_cloudwatch_iam_role"]}}],"variables":{"amazon_side_asn":{"default":"64512","description":"The Autonomous System Number (ASN) for the Amazon side of the gateway. By default the virtual private gateway is created with the current default Amazon ASN."},"assign_ipv6_address_on_creation":{"default":false,"description":"Assign IPv6 address on subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"azs":{"default":[],"description":"A list of availability zones names or ids in the region"},"cidr":{"default":"0.0.0.0/0","description":"The CIDR block for the VPC. Default value is a valid CIDR, but not acceptable by AWS and should be overridden"},"create_database_internet_gateway_route":{"default":false,"description":"Controls if an internet gateway route for public database access should be created"},"create_database_nat_gateway_route":{"default":false,"description":"Controls if a nat gateway route should be created to give internet access to the database subnets"},"create_database_subnet_group":{"default":true,"description":"Controls if database subnet group should be created (n.b. database_subnets must also be set)"},"create_database_subnet_route_table":{"default":false,"description":"Controls if separate route table for database should be created"},"create_egress_only_igw":{"default":true,"description":"Controls if an Egress Only Internet Gateway is created and its related routes."},"create_elasticache_subnet_group":{"default":true,"description":"Controls if elasticache subnet group should be created"},"create_elasticache_subnet_route_table":{"default":false,"description":"Controls if separate route table for elasticache should be created"},"create_flow_log_cloudwatch_iam_role":{"default":false,"description":"Whether to create IAM role for VPC Flow Logs"},"create_flow_log_cloudwatch_log_group":{"default":false,"description":"Whether to create CloudWatch log group for VPC Flow Logs"},"create_igw":{"default":true,"description":"Controls if an Internet Gateway is created for public subnets and the related routes that connect them."},"create_redshift_subnet_group":{"default":true,"description":"Controls if redshift subnet group should be created"},"create_redshift_subnet_route_table":{"default":false,"description":"Controls if separate route table for redshift should be created"},"create_vpc":{"default":true,"description":"Controls if VPC should be created (it affects almost all resources)"},"customer_gateway_tags":{"default":{},"description":"Additional tags for the Customer Gateway"},"customer_gateways":{"default":{},"description":"Maps of Customer Gateway's attributes (BGP ASN and Gateway's Internet-routable external IP address)"},"database_acl_tags":{"default":{},"description":"Additional tags for the database subnets network ACL"},"database_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for database subnets"},"database_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets inbound network ACL rules"},"database_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Database subnets outbound network ACL rules"},"database_route_table_tags":{"default":{},"description":"Additional tags for the database route tables"},"database_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on database subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"database_subnet_group_name":{"default":null,"description":"Name of database subnet group"},"database_subnet_group_tags":{"default":{},"description":"Additional tags for the database subnet group"},"database_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 database subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"database_subnet_suffix":{"default":"db","description":"Suffix to append to database subnets name"},"database_subnet_tags":{"default":{},"description":"Additional tags for the database subnets"},"database_subnets":{"default":[],"description":"A list of database subnets"},"default_network_acl_egress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of egress rules to set on the Default Network ACL"},"default_network_acl_ingress":{"default":[{"action":"allow","cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_no":"100","to_port":"0"},{"action":"allow","from_port":"0","ipv6_cidr_block":"::/0","protocol":"-1","rule_no":"101","to_port":"0"}],"description":"List of maps of ingress rules to set on the Default Network ACL"},"default_network_acl_name":{"default":"","description":"Name to be used on the Default Network ACL"},"default_network_acl_tags":{"default":{},"description":"Additional tags for the Default Network ACL"},"default_route_table_propagating_vgws":{"default":[],"description":"List of virtual gateways for propagation"},"default_route_table_routes":{"default":[],"description":"Configuration block of routes. See https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/default_route_table#route"},"default_route_table_tags":{"default":{},"description":"Additional tags for the default route table"},"default_security_group_egress":{"default":null,"description":"List of maps of egress rules to set on the default security group"},"default_security_group_ingress":{"default":null,"description":"List of maps of ingress rules to set on the default security group"},"default_security_group_name":{"default":"default","description":"Name to be used on the default security group"},"default_security_group_tags":{"default":{},"description":"Additional tags for the default security group"},"default_vpc_enable_classiclink":{"default":false,"description":"Should be true to enable ClassicLink in the Default VPC"},"default_vpc_enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the Default VPC"},"default_vpc_enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the Default VPC"},"default_vpc_name":{"default":"","description":"Name to be used on the Default VPC"},"default_vpc_tags":{"default":{},"description":"Additional tags for the Default VPC"},"dhcp_options_domain_name":{"default":"","description":"Specifies DNS name for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_domain_name_servers":{"default":["AmazonProvidedDNS"],"description":"Specify a list of DNS server addresses for DHCP options set, default to AWS provided (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_name_servers":{"default":[],"description":"Specify a list of netbios servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_netbios_node_type":{"default":"","description":"Specify netbios node_type for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_ntp_servers":{"default":[],"description":"Specify a list of NTP servers for DHCP options set (requires enable_dhcp_options set to true)"},"dhcp_options_tags":{"default":{},"description":"Additional tags for the DHCP option set (requires enable_dhcp_options set to true)"},"elasticache_acl_tags":{"default":{},"description":"Additional tags for the elasticache subnets network ACL"},"elasticache_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for elasticache subnets"},"elasticache_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets inbound network ACL rules"},"elasticache_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Elasticache subnets outbound network ACL rules"},"elasticache_route_table_tags":{"default":{},"description":"Additional tags for the elasticache route tables"},"elasticache_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on elasticache subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"elasticache_subnet_group_name":{"default":null,"description":"Name of elasticache subnet group"},"elasticache_subnet_group_tags":{"default":{},"description":"Additional tags for the elasticache subnet group"},"elasticache_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 elasticache subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"elasticache_subnet_suffix":{"default":"elasticache","description":"Suffix to append to elasticache subnets name"},"elasticache_subnet_tags":{"default":{},"description":"Additional tags for the elasticache subnets"},"elasticache_subnets":{"default":[],"description":"A list of elasticache subnets"},"enable_classiclink":{"default":null,"description":"Should be true to enable ClassicLink for the VPC. Only valid in regions and accounts that support EC2 Classic."},"enable_classiclink_dns_support":{"default":null,"description":"Should be true to enable ClassicLink DNS Support for the VPC. Only valid in regions and accounts that support EC2 Classic."},"enable_dhcp_options":{"default":false,"description":"Should be true if you want to specify a DHCP options set with a custom domain name, DNS servers, NTP servers, netbios servers, and/or netbios server type"},"enable_dns_hostnames":{"default":false,"description":"Should be true to enable DNS hostnames in the VPC"},"enable_dns_support":{"default":true,"description":"Should be true to enable DNS support in the VPC"},"enable_flow_log":{"default":false,"description":"Whether or not to enable VPC Flow Logs"},"enable_ipv6":{"default":false,"description":"Requests an Amazon-provided IPv6 CIDR block with a /56 prefix length for the VPC. You cannot specify the range of IP addresses, or the size of the CIDR block."},"enable_nat_gateway":{"default":false,"description":"Should be true if you want to provision NAT Gateways for each of your private networks"},"enable_public_redshift":{"default":false,"description":"Controls if redshift should have public routing table"},"enable_vpn_gateway":{"default":false,"description":"Should be true if you want to create a new VPN Gateway resource and attach it to the VPC"},"external_nat_ip_ids":{"default":[],"description":"List of EIP IDs to be assigned to the NAT Gateways (used in combination with reuse_nat_ips)"},"external_nat_ips":{"default":[],"description":"List of EIPs to be used for `nat_public_ips` output (used in combination with reuse_nat_ips and external_nat_ip_ids)"},"flow_log_cloudwatch_iam_role_arn":{"default":"","description":"The ARN for the IAM role that's used to post flow logs to a CloudWatch Logs log group. When flow_log_destination_arn is set to ARN of Cloudwatch Logs, this argument needs to be provided."},"flow_log_cloudwatch_log_group_kms_key_id":{"default":null,"description":"The ARN of the KMS Key to use when encrypting log data for VPC flow logs."},"flow_log_cloudwatch_log_group_name_prefix":{"default":"/aws/vpc-flow-log/","description":"Specifies the name prefix of CloudWatch Log Group for VPC flow logs."},"flow_log_cloudwatch_log_group_retention_in_days":{"default":null,"description":"Specifies the number of days you want to retain log events in the specified log group for VPC flow logs."},"flow_log_destination_arn":{"default":"","description":"The ARN of the CloudWatch log group or S3 bucket where VPC Flow Logs will be pushed. If this ARN is a S3 bucket the appropriate permissions need to be set on that bucket's policy. When create_flow_log_cloudwatch_log_group is set to false this argument must be provided."},"flow_log_destination_type":{"default":"cloud-watch-logs","description":"Type of flow log destination. Can be s3 or cloud-watch-logs."},"flow_log_log_format":{"default":null,"description":"The fields to include in the flow log record, in the order in which they should appear."},"flow_log_max_aggregation_interval":{"default":600,"description":"The maximum interval of time during which a flow of packets is captured and aggregated into a flow log record. Valid Values: `60` seconds or `600` seconds."},"flow_log_traffic_type":{"default":"ALL","description":"The type of traffic to capture. Valid values: ACCEPT, REJECT, ALL."},"igw_tags":{"default":{},"description":"Additional tags for the internet gateway"},"instance_tenancy":{"default":"default","description":"A tenancy option for instances launched into the VPC"},"intra_acl_tags":{"default":{},"description":"Additional tags for the intra subnets network ACL"},"intra_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for intra subnets"},"intra_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets inbound network ACLs"},"intra_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Intra subnets outbound network ACLs"},"intra_route_table_tags":{"default":{},"description":"Additional tags for the intra route tables"},"intra_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on intra subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"intra_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 intra subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"intra_subnet_suffix":{"default":"intra","description":"Suffix to append to intra subnets name"},"intra_subnet_tags":{"default":{},"description":"Additional tags for the intra subnets"},"intra_subnets":{"default":[],"description":"A list of intra subnets"},"manage_default_network_acl":{"default":false,"description":"Should be true to adopt and manage Default Network ACL"},"manage_default_route_table":{"default":false,"description":"Should be true to manage default route table"},"manage_default_security_group":{"default":false,"description":"Should be true to adopt and manage default security group"},"manage_default_vpc":{"default":false,"description":"Should be true to adopt and manage Default VPC"},"map_public_ip_on_launch":{"default":true,"description":"Should be false if you do not want to auto-assign public IP on launch"},"name":{"default":"","description":"Name to be used on all the resources as identifier"},"nat_eip_tags":{"default":{},"description":"Additional tags for the NAT EIP"},"nat_gateway_tags":{"default":{},"description":"Additional tags for the NAT gateways"},"one_nat_gateway_per_az":{"default":false,"description":"Should be true if you want only one NAT Gateway per availability zone. Requires `var.azs` to be set, and the number of `public_subnets` created to be greater than or equal to the number of availability zones specified in `var.azs`."},"outpost_acl_tags":{"default":{},"description":"Additional tags for the outpost subnets network ACL"},"outpost_arn":{"default":null,"description":"ARN of Outpost you want to create a subnet in."},"outpost_az":{"default":null,"description":"AZ where Outpost is anchored."},"outpost_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for outpost subnets"},"outpost_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets inbound network ACLs"},"outpost_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Outpost subnets outbound network ACLs"},"outpost_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on outpost subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"outpost_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 outpost subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"outpost_subnet_suffix":{"default":"outpost","description":"Suffix to append to outpost subnets name"},"outpost_subnet_tags":{"default":{},"description":"Additional tags for the outpost subnets"},"outpost_subnets":{"default":[],"description":"A list of outpost subnets inside the VPC"},"private_acl_tags":{"default":{},"description":"Additional tags for the private subnets network ACL"},"private_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for private subnets"},"private_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets inbound network ACLs"},"private_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Private subnets outbound network ACLs"},"private_route_table_tags":{"default":{},"description":"Additional tags for the private route tables"},"private_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on private subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"private_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 private subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"private_subnet_suffix":{"default":"private","description":"Suffix to append to private subnets name"},"private_subnet_tags":{"default":{},"description":"Additional tags for the private subnets"},"private_subnets":{"default":[],"description":"A list of private subnets inside the VPC"},"propagate_intra_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_private_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"propagate_public_route_tables_vgw":{"default":false,"description":"Should be true if you want route table propagation"},"public_acl_tags":{"default":{},"description":"Additional tags for the public subnets network ACL"},"public_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for public subnets"},"public_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets inbound network ACLs"},"public_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Public subnets outbound network ACLs"},"public_route_table_tags":{"default":{},"description":"Additional tags for the public route tables"},"public_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on public subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"public_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 public subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"public_subnet_suffix":{"default":"public","description":"Suffix to append to public subnets name"},"public_subnet_tags":{"default":{},"description":"Additional tags for the public subnets"},"public_subnets":{"default":[],"description":"A list of public subnets inside the VPC"},"redshift_acl_tags":{"default":{},"description":"Additional tags for the redshift subnets network ACL"},"redshift_dedicated_network_acl":{"default":false,"description":"Whether to use dedicated network ACL (not default) and custom rules for redshift subnets"},"redshift_inbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets inbound network ACL rules"},"redshift_outbound_acl_rules":{"default":[{"cidr_block":"0.0.0.0/0","from_port":"0","protocol":"-1","rule_action":"allow","rule_number":"100","to_port":"0"}],"description":"Redshift subnets outbound network ACL rules"},"redshift_route_table_tags":{"default":{},"description":"Additional tags for the redshift route tables"},"redshift_subnet_assign_ipv6_address_on_creation":{"default":null,"description":"Assign IPv6 address on redshift subnet, must be disabled to change IPv6 CIDRs. This is the IPv6 equivalent of map_public_ip_on_launch"},"redshift_subnet_group_name":{"default":null,"description":"Name of redshift subnet group"},"redshift_subnet_group_tags":{"default":{},"description":"Additional tags for the redshift subnet group"},"redshift_subnet_ipv6_prefixes":{"default":[],"description":"Assigns IPv6 redshift subnet id based on the Amazon provided /56 prefix base 10 integer (0-256). Must be of equal length to the corresponding IPv4 subnet list"},"redshift_subnet_suffix":{"default":"redshift","description":"Suffix to append to redshift subnets name"},"redshift_subnet_tags":{"default":{},"description":"Additional tags for the redshift subnets"},"redshift_subnets":{"default":[],"description":"A list of redshift subnets"},"reuse_nat_ips":{"default":false,"description":"Should be true if you don't want EIPs to be created for your NAT Gateways and will instead pass them in via the 'external_nat_ip_ids' variable"},"secondary_cidr_blocks":{"default":[],"description":"List of secondary CIDR blocks to associate with the VPC to extend the IP Address pool"},"single_nat_gateway":{"default":false,"description":"Should be true if you want to provision a single shared NAT Gateway across all of your private networks"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"vpc_flow_log_permissions_boundary":{"default":null,"description":"The ARN of the Permissions Boundary for the VPC Flow Log IAM Role"},"vpc_flow_log_tags":{"default":{},"description":"Additional tags for the VPC Flow Logs"},"vpc_tags":{"default":{},"description":"Additional tags for the VPC"},"vpn_gateway_az":{"default":null,"description":"The Availability Zone for the VPN Gateway"},"vpn_gateway_id":{"default":"","description":"ID of VPN Gateway to attach to the VPC"},"vpn_gateway_tags":{"default":{},"description":"Additional tags for the VPN gateway"}}},"version_constraint":"3.7.0"}}}}}
